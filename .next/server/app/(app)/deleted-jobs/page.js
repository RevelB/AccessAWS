(()=>{var e={};e.id=471,e.ids=[471],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},4770:e=>{"use strict";e.exports=require("crypto")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},4446:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),r(4153),r(5215),r(5866),r(6200);var a=r(3191),s=r(8716),i=r(7922),n=r.n(i),o=r(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=["",{children:["(app)",{children:["deleted-jobs",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,4153)),"C:\\Users\\micha\\Desktop\\DevEnv\\AccessAWS\\src\\app\\(app)\\deleted-jobs\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,5215)),"C:\\Users\\micha\\Desktop\\DevEnv\\AccessAWS\\src\\app\\(app)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,6200)),"C:\\Users\\micha\\Desktop\\DevEnv\\AccessAWS\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\micha\\Desktop\\DevEnv\\AccessAWS\\src\\app\\(app)\\deleted-jobs\\page.tsx"],u="/(app)/deleted-jobs/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(app)/deleted-jobs/page",pathname:"/deleted-jobs",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9911:(e,t,r)=>{Promise.resolve().then(r.bind(r,6327))},7202:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(6557).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},6327:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var a=r(326),s=r(7577),i=r(5047),n=r(4690),o=r(3011),l=r(6228),d=r(9752),c=r(1664),u=r(8443),m=r(5290),p=r(7202);let f=(0,r(6557).Z)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var x=r(8091),h=r(4097),b=r(5296),v=r(1050),y=r(2237);function g(){let[e,t]=(0,s.useState)([]),[r,g]=(0,s.useState)(!0),[j,N]=(0,s.useState)(null),[w,D]=(0,s.useState)(null),{user:k}=(0,n.a)(),A=(0,i.useRouter)(),{toast:R}=(0,h.pm)(),C=async e=>{if(k){N(e.originalJobId);try{let r=await (0,o.pt)(e,k.userId);t(t=>t.filter(t=>t.originalJobId!==e.originalJobId)),R({title:"Job Restored",description:`Job "${e.clockNumberMediaName}" has been successfully restored.`}),A.push(`/jobs/${r}`)}catch(e){console.error("Failed to restore job:",e),R({title:"Error",description:"Failed to restore job.",variant:"destructive"})}finally{N(null)}}},P=async e=>{D(e.originalJobId);try{let{data:r}=await l.L.models.DeletedJobs.list(),a=r.find(t=>t.originalJobId===e.originalJobId);a&&(await (0,o.po)(a.id),t(t=>t.filter(t=>t.originalJobId!==e.originalJobId)),R({title:"Job Permanently Deleted",description:`Job "${e.clockNumberMediaName}" has been permanently deleted.`}))}catch(e){console.error("Failed to permanently delete job:",e),R({title:"Error",description:"Failed to permanently delete job.",variant:"destructive"})}finally{D(null)}},J=e=>{try{return(0,v.Z)((0,y.Z)(e),"MMM dd, yyyy HH:mm")}catch{return"Invalid date"}};return r?(0,a.jsxs)("div",{className:"flex h-64 w-full items-center justify-center",children:[a.jsx(m.Z,{className:"h-8 w-8 animate-spin text-primary"}),a.jsx("span",{className:"ml-2",children:"Loading deleted jobs..."})]}):(0,a.jsxs)("div",{className:"container mx-auto py-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Deleted Jobs"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage and restore deleted jobs. Jobs are kept here for 30 days before being permanently deleted."})]}),a.jsx(c.z,{variant:"outline",onClick:()=>A.push("/dashboard/open"),children:"Back to Dashboard"})]}),0===e.length?a.jsx(d.Zb,{children:(0,a.jsxs)(d.aY,{className:"flex flex-col items-center justify-center py-12",children:[a.jsx(p.Z,{className:"h-12 w-12 text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Deleted Jobs"}),a.jsx("p",{className:"text-muted-foreground text-center",children:"There are no deleted jobs to display. Deleted jobs will appear here for 30 days."})]})}):a.jsx("div",{className:"grid gap-4",children:e.map(e=>(0,a.jsxs)(d.Zb,{children:[a.jsx(d.Ol,{children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx(d.ll,{className:"text-lg",children:e.clockNumberMediaName}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx(u.C,{variant:"outline",children:e.client}),a.jsx(u.C,{variant:"outline",children:e.agency}),a.jsx(u.C,{variant:"outline",children:e.status})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>C(e),disabled:j===e.originalJobId,children:[j===e.originalJobId?a.jsx(m.Z,{className:"h-4 w-4 animate-spin"}):a.jsx(f,{className:"h-4 w-4"}),"Restore"]}),(0,a.jsxs)(b.aR,{children:[a.jsx(b.vW,{asChild:!0,children:(0,a.jsxs)(c.z,{size:"sm",variant:"destructive",disabled:w===e.originalJobId,children:[w===e.originalJobId?a.jsx(m.Z,{className:"h-4 w-4 animate-spin"}):a.jsx(x.Z,{className:"h-4 w-4"}),"Delete Permanently"]})}),(0,a.jsxs)(b._T,{children:[(0,a.jsxs)(b.fY,{children:[a.jsx(b.f$,{children:"Permanently Delete Job"}),(0,a.jsxs)(b.yT,{children:['This action cannot be undone. This will permanently delete the job "',e.clockNumberMediaName,'" and all its data.']})]}),(0,a.jsxs)(b.xo,{children:[a.jsx(b.le,{children:"Cancel"}),a.jsx(b.OL,{onClick:()=>P(e),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete Permanently"})]})]})]})]})]})}),(0,a.jsxs)(d.aY,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Order Number:"})," ",e.orderNumber]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Delivery Date:"})," ",J(e.deliveryDate)]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Deleted:"})," ",J(e.deletedAt)]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Deleted By:"})," ",e.deletedBy]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"PO Reference:"})," ",e.poReference]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"font-medium",children:"Destination:"})," ",e.destination]})]}),e.deletionReason&&(0,a.jsxs)("div",{className:"mt-4 p-3 bg-muted rounded-md",children:[a.jsx("span",{className:"font-medium",children:"Deletion Reason:"})," ",e.deletionReason]})]})]},e.originalJobId))})]})}},5296:(e,t,r)=>{"use strict";r.d(t,{OL:()=>b,_T:()=>m,aR:()=>l,f$:()=>x,fY:()=>p,le:()=>v,vW:()=>d,xo:()=>f,yT:()=>h});var a=r(326),s=r(7577),i=r(5887),n=r(1223),o=r(1664);let l=i.fC,d=i.xz,c=i.h_,u=s.forwardRef(({className:e,...t},r)=>a.jsx(i.aV,{className:(0,n.cn)("fixed inset-0 z-50 bg-background/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));u.displayName=i.aV.displayName;let m=s.forwardRef(({className:e,...t},r)=>(0,a.jsxs)(c,{children:[a.jsx(u,{}),a.jsx(i.VY,{ref:r,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));m.displayName=i.VY.displayName;let p=({className:e,...t})=>a.jsx("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...t});p.displayName="AlertDialogHeader";let f=({className:e,...t})=>a.jsx("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});f.displayName="AlertDialogFooter";let x=s.forwardRef(({className:e,...t},r)=>a.jsx(i.Dx,{ref:r,className:(0,n.cn)("text-lg font-semibold",e),...t}));x.displayName=i.Dx.displayName;let h=s.forwardRef(({className:e,...t},r)=>a.jsx(i.dk,{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));h.displayName=i.dk.displayName;let b=s.forwardRef(({className:e,...t},r)=>a.jsx(i.aU,{ref:r,className:(0,n.cn)((0,o.d)(),e),...t}));b.displayName=i.aU.displayName;let v=s.forwardRef(({className:e,...t},r)=>a.jsx(i.$j,{ref:r,className:(0,n.cn)((0,o.d)({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));v.displayName=i.$j.displayName},8443:(e,t,r)=>{"use strict";r.d(t,{C:()=>o});var a=r(326);r(7577);var s=r(9360),i=r(1223);let n=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:t,...r}){return a.jsx("div",{className:(0,i.cn)(n({variant:t}),e),...r})}},9752:(e,t,r)=>{"use strict";r.d(t,{Ol:()=>o,SZ:()=>d,Zb:()=>n,aY:()=>c,eW:()=>u,ll:()=>l});var a=r(326),s=r(7577),i=r(1223);let n=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));n.displayName="Card";let o=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));o.displayName="CardHeader";let l=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let d=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let c=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,i.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let u=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t}));u.displayName="CardFooter"},3011:(e,t,r)=>{"use strict";r.d(t,{W9:()=>s,po:()=>n,pt:()=>i});var a=r(6228);async function s(e,t,r){try{await a.L.models.DeletedJobs.create({originalJobId:e.id,clockNumberMediaName:e.clockNumberMediaName,orderNumber:e.orderNumber,services:JSON.stringify(e.services||[]),client:e.client,agency:e.agency,deliveryDate:e.deliveryDate,poReference:e.poReference,destination:e.destination,productionNotes:e.productionNotes,creator:e.creator,checker:e.checker,commercialDescription:e.commercialDescription,status:e.status,priority:e.priority,onHold:e.onHold,inSAP:e.inSAP,stellarTask:e.stellarTask,rate:e.rate||0,adjusted:e.adjusted||0,inputter:e.inputter||"",verifier:e.verifier||"",extcosts:e.extcosts||0,billingnotes:e.billingnotes||"",deletedBy:t,deletedAt:new Date().toISOString(),deletionReason:r||""}),await a.L.models.Job.delete({id:e.id})}catch(e){throw console.error("Failed to soft delete job:",e),e}}async function i(e,t){try{let{data:t}=await a.L.models.Job.create({clockNumberMediaName:e.clockNumberMediaName,orderNumber:e.orderNumber,services:e.services,client:e.client,agency:e.agency,deliveryDate:e.deliveryDate,poReference:e.poReference,destination:e.destination,productionNotes:e.productionNotes,creator:e.creator,checker:e.checker,commercialDescription:e.commercialDescription,status:e.status,priority:e.priority,onHold:e.onHold,inSAP:e.inSAP,stellarTask:e.stellarTask,rate:e.rate,adjusted:e.adjusted,inputter:e.inputter,verifier:e.verifier,extcosts:e.extcosts,billingnotes:e.billingnotes});if(!t)throw Error("Failed to create restored job");let{data:r}=await a.L.models.DeletedJobs.list(),s=r.find(t=>t.originalJobId===e.originalJobId);return s&&await a.L.models.DeletedJobs.delete({id:s.id}),t.id}catch(e){throw console.error("Failed to restore deleted job:",e),e}}async function n(e){try{await a.L.models.DeletedJobs.delete({id:e})}catch(e){throw console.error("Failed to permanently delete job:",e),e}}},4153:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(8570).createProxy)(String.raw`C:\Users\micha\Desktop\DevEnv\AccessAWS\src\app\(app)\deleted-jobs\page.tsx#default`)},5887:(e,t,r)=>{"use strict";r.d(t,{aU:()=>$,$j:()=>T,VY:()=>S,dk:()=>O,aV:()=>M,h_:()=>I,fC:()=>J,Dx:()=>E,xz:()=>_});var a=r(7577),s=r(326);function i(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function n(...e){return a.useCallback(function(...e){return t=>{let r=!1,a=e.map(e=>{let a=i(e,t);return r||"function"!=typeof a||(r=!0),a});if(r)return()=>{for(let t=0;t<a.length;t++){let r=a[t];"function"==typeof r?r():i(e[t],null)}}}}(...e),e)}var o=r(784),l=r(9469),d="AlertDialog",[c,u]=function(e,t=[]){let r=[],i=()=>{let t=r.map(e=>a.createContext(e));return function(r){let s=r?.[e]||t;return a.useMemo(()=>({[`__scope${e}`]:{...r,[e]:s}}),[r,s])}};return i.scopeName=e,[function(t,i){let n=a.createContext(i),o=r.length;r=[...r,i];let l=t=>{let{scope:r,children:i,...l}=t,d=r?.[e]?.[o]||n,c=a.useMemo(()=>l,Object.values(l));return(0,s.jsx)(d.Provider,{value:c,children:i})};return l.displayName=t+"Provider",[l,function(r,s){let l=s?.[e]?.[o]||n,d=a.useContext(l);if(d)return d;if(void 0!==i)return i;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let s=r.reduce((t,{useScope:r,scopeName:a})=>{let s=r(e)[`__scope${a}`];return{...t,...s}},{});return a.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return r.scopeName=t.scopeName,r}(i,...t)]}(d,[o.p8]),m=(0,o.p8)(),p=e=>{let{__scopeAlertDialog:t,...r}=e,a=m(t);return(0,s.jsx)(o.fC,{...a,...r,modal:!0})};p.displayName=d;var f=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,i=m(r);return(0,s.jsx)(o.xz,{...i,...a,ref:t})});f.displayName="AlertDialogTrigger";var x=e=>{let{__scopeAlertDialog:t,...r}=e,a=m(t);return(0,s.jsx)(o.h_,{...a,...r})};x.displayName="AlertDialogPortal";var h=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,i=m(r);return(0,s.jsx)(o.aV,{...i,...a,ref:t})});h.displayName="AlertDialogOverlay";var b="AlertDialogContent",[v,y]=c(b),g=(0,l.sA)("AlertDialogContent"),j=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,children:i,...l}=e,d=m(r),c=a.useRef(null),u=n(t,c),p=a.useRef(null);return(0,s.jsx)(o.jm,{contentName:b,titleName:N,docsSlug:"alert-dialog",children:(0,s.jsx)(v,{scope:r,cancelRef:p,children:(0,s.jsxs)(o.VY,{role:"alertdialog",...d,...l,ref:u,onOpenAutoFocus:function(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e?.(a),!1===r||!a.defaultPrevented)return t?.(a)}}(l.onOpenAutoFocus,e=>{e.preventDefault(),p.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,s.jsx)(g,{children:i}),(0,s.jsx)(P,{contentRef:c})]})})})});j.displayName=b;var N="AlertDialogTitle",w=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,i=m(r);return(0,s.jsx)(o.Dx,{...i,...a,ref:t})});w.displayName=N;var D="AlertDialogDescription",k=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,i=m(r);return(0,s.jsx)(o.dk,{...i,...a,ref:t})});k.displayName=D;var A=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,i=m(r);return(0,s.jsx)(o.x8,{...i,...a,ref:t})});A.displayName="AlertDialogAction";var R="AlertDialogCancel",C=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,{cancelRef:i}=y(R,r),l=m(r),d=n(t,i);return(0,s.jsx)(o.x8,{...l,...a,ref:d})});C.displayName=R;var P=({contentRef:e})=>{let t=`\`${b}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${b}\` by passing a \`${D}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${b}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return a.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},J=p,_=f,I=x,M=h,S=j,$=A,T=C,E=w,O=k}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,377,537,971,730,424,26,717],()=>r(4446));module.exports=a})();