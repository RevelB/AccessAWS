"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[449],{5478:function(e,t,n){n.d(t,{Ry:function(){return u}});var r=new WeakMap,i=new WeakMap,o={},a=0,s=function(e){return e&&(e.host||s(e.parentNode))},c=function(e,t,n,c){var u=(Array.isArray(e)?e:[e]).map(function(e){if(t.contains(e))return e;var n=s(e);return n&&t.contains(n)?n:(console.error("aria-hidden",e,"in not contained inside",t,". Doing nothing"),null)}).filter(function(e){return!!e});o[n]||(o[n]=new WeakMap);var l=o[n],p=[],d=new Set,f=new Set(u),h=function(e){!e||d.has(e)||(d.add(e),h(e.parentNode))};u.forEach(h);var m=function(e){!e||f.has(e)||Array.prototype.forEach.call(e.children,function(e){if(d.has(e))m(e);else try{var t=e.getAttribute(c),o=null!==t&&"false"!==t,a=(r.get(e)||0)+1,s=(l.get(e)||0)+1;r.set(e,a),l.set(e,s),p.push(e),1===a&&o&&i.set(e,!0),1===s&&e.setAttribute(n,"true"),o||e.setAttribute(c,"true")}catch(t){console.error("aria-hidden: cannot operate on ",e,t)}})};return m(t),d.clear(),a++,function(){p.forEach(function(e){var t=r.get(e)-1,o=l.get(e)-1;r.set(e,t),l.set(e,o),t||(i.has(e)||e.removeAttribute(c),i.delete(e)),o||e.removeAttribute(n)}),--a||(r=new WeakMap,r=new WeakMap,i=new WeakMap,o={})}},u=function(e,t,n){void 0===n&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=t||("undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),c(r,i,n,"aria-hidden")):function(){return null}}},5863:function(e,t,n){n.d(t,{Z:function(){return r}});let r=(0,n(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},5770:function(e,t,n){n.d(t,{Av:function(){return a},pF:function(){return r},xv:function(){return o},zi:function(){return i}});var r="right-scroll-bar-position",i="width-before-scroll-bar",o="with-scroll-bars-hidden",a="--removed-body-scroll-bar-size"},5517:function(e,t,n){n.d(t,{jp:function(){return m}});var r=n(2265),i=n(8704),o=n(5770),a={left:0,top:0,right:0,gap:0},s=function(e){return parseInt(e||"",10)||0},c=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],i=t["padding"===e?"paddingRight":"marginRight"];return[s(n),s(r),s(i)]},u=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return a;var t=c(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},l=(0,i.Ws)(),p="data-scroll-locked",d=function(e,t,n,r){var i=e.left,a=e.top,s=e.right,c=e.gap;return void 0===n&&(n="margin"),"\n  .".concat(o.xv," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(c,"px ").concat(r,";\n  }\n  body[").concat(p,"] {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(a,"px;\n    padding-right: ").concat(s,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(c,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(o.pF," {\n    right: ").concat(c,"px ").concat(r,";\n  }\n  \n  .").concat(o.zi," {\n    margin-right: ").concat(c,"px ").concat(r,";\n  }\n  \n  .").concat(o.pF," .").concat(o.pF," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(o.zi," .").concat(o.zi," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body[").concat(p,"] {\n    ").concat(o.Av,": ").concat(c,"px;\n  }\n")},f=function(){var e=parseInt(document.body.getAttribute(p)||"0",10);return isFinite(e)?e:0},h=function(){r.useEffect(function(){return document.body.setAttribute(p,(f()+1).toString()),function(){var e=f()-1;e<=0?document.body.removeAttribute(p):document.body.setAttribute(p,e.toString())}},[])},m=function(e){var t=e.noRelative,n=e.noImportant,i=e.gapMode,o=void 0===i?"margin":i;h();var a=r.useMemo(function(){return u(o)},[o]);return r.createElement(l,{styles:d(a,!t,o,n?"":"!important")})}},8704:function(e,t,n){n.d(t,{Ws:function(){return s}});var r,i=n(2265),o=function(){var e=0,t=null;return{add:function(i){if(0==e&&(t=function(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=r||n.nc;return t&&e.setAttribute("nonce",t),e}())){var o,a;(o=t).styleSheet?o.styleSheet.cssText=i:o.appendChild(document.createTextNode(i)),a=t,(document.head||document.getElementsByTagName("head")[0]).appendChild(a)}e++},remove:function(){--e||!t||(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},a=function(){var e=o();return function(t,n){i.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},s=function(){var e=a();return function(t){return e(t.styles,t.dynamic),null}}},7325:function(e,t,n){n.d(t,{q:function(){return s}});var r=n(2265);function i(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var o="undefined"!=typeof window?r.useLayoutEffect:r.useEffect,a=new WeakMap;function s(e,t){var n,s,c,u=(n=t||null,s=function(t){return e.forEach(function(e){return i(e,t)})},(c=(0,r.useState)(function(){return{value:n,callback:s,facade:{get current(){return c.value},set current(value){var e=c.value;e!==value&&(c.value=value,c.callback(value,e))}}}})[0]).callback=s,c.facade);return o(function(){var t=a.get(u);if(t){var n=new Set(t),r=new Set(e),o=u.current;n.forEach(function(e){r.has(e)||i(e,null)}),r.forEach(function(e){n.has(e)||i(e,o)})}a.set(u,e)},[e]),u}},9085:function(e,t,n){n.d(t,{L:function(){return a}});var r=n(6200),i=n(2265),o=function(e){var t=e.sideCar,n=(0,r._T)(e,["sideCar"]);if(!t)throw Error("Sidecar: please provide `sideCar` property to import the right car");var o=t.read();if(!o)throw Error("Sidecar medium not found");return i.createElement(o,(0,r.pi)({},n))};function a(e,t){return e.useMedium(t),o}o.isSideCarExport=!0},5533:function(e,t,n){n.d(t,{_:function(){return o}});var r=n(6200);function i(e){return e}function o(e){void 0===e&&(e={});var t,n,o,a=(void 0===t&&(t=i),n=[],o=!1,{read:function(){if(o)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:null},useMedium:function(e){var r=t(e,o);return n.push(r),function(){n=n.filter(function(e){return e!==r})}},assignSyncMedium:function(e){for(o=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){o=!0;var t=[];if(n.length){var r=n;n=[],r.forEach(e),t=n}var i=function(){var n=t;t=[],n.forEach(e)},a=function(){return Promise.resolve().then(i)};a(),n={push:function(e){t.push(e),a()},filter:function(e){return t=t.filter(e),n}}}});return a.options=(0,r.pi)({async:!0,ssr:!1},e),a}},3990:function(e,t,n){let r;n.d(t,{d:function(){return rz}});var i,o,a,s,c,u,l,p,d,f,h,m,y,v,E,b,T,g,N,S,O,A=n(5871);function I(e){return"function"==typeof e}function _(e){return function(t){if(I(null==t?void 0:t.lift))return t.lift(function(t){try{return e(t,this)}catch(e){this.error(e)}});throw TypeError("Unable to lift unknown Observable type")}}Symbol();var k=n(6200),w=((i=function(e){Error.call(e),e.stack=Error().stack},o=function(e){i(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}).prototype=Object.create(Error.prototype),o.prototype.constructor=o,o);function C(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var D=function(){var e;function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e,t,n,r,i,o=this._parentage;if(o){if(this._parentage=null,Array.isArray(o))try{for(var a=(0,k.XA)(o),s=a.next();!s.done;s=a.next())s.value.remove(this)}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else o.remove(this)}var c=this.initialTeardown;if(I(c))try{c()}catch(e){i=e instanceof w?e.errors:[e]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var l=(0,k.XA)(u),p=l.next();!p.done;p=l.next()){var d=p.value;try{R(d)}catch(e){i=null!=i?i:[],e instanceof w?i=(0,k.ev)((0,k.ev)([],(0,k.CR)(i)),(0,k.CR)(e.errors)):i.push(e)}}}catch(e){n={error:e}}finally{try{p&&!p.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}if(i)throw new w(i)}},t.prototype.add=function(e){var n;if(e&&e!==this){if(this.closed)R(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}},t.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},t.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},t.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&C(t,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&C(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}();function x(e){return e instanceof D||e&&"closed"in e&&I(e.remove)&&I(e.add)&&I(e.unsubscribe)}function R(e){I(e)?e():e.unsubscribe()}D.EMPTY;var L={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},M={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=M.delegate;return(null==i?void 0:i.setTimeout)?i.setTimeout.apply(i,(0,k.ev)([e,t],(0,k.CR)(n))):setTimeout.apply(void 0,(0,k.ev)([e,t],(0,k.CR)(n)))},clearTimeout:function(e){var t=M.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function P(e){M.setTimeout(function(){var t=L.onUnhandledError;if(t)t(e);else throw e})}function F(){}var j=U("C",void 0,void 0);function U(e,t,n){return{kind:e,value:t,error:n}}var $=null,B=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,x(t)&&t.add(n)):n.destination=W,n}return(0,k.ZT)(t,e),t.create=function(e,t,n){return new q(e,t,n)},t.prototype.next=function(e){this.isStopped?z(U("N",e,void 0),this):this._next(e)},t.prototype.error=function(e){this.isStopped?z(U("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?z(j,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(D),G=Function.prototype.bind;function K(e,t){return G.call(e,t)}var V=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){Q(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){Q(e)}else Q(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){Q(e)}},e}(),q=function(e){function t(t,n,r){var i,o,a=e.call(this)||this;return I(t)||!t?i={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:a&&L.useDeprecatedNextContext?((o=Object.create(t)).unsubscribe=function(){return a.unsubscribe()},i={next:t.next&&K(t.next,o),error:t.error&&K(t.error,o),complete:t.complete&&K(t.complete,o)}):i=t,a.destination=new V(i),a}return(0,k.ZT)(t,e),t}(B);function Q(e){L.useDeprecatedSynchronousErrorHandling?L.useDeprecatedSynchronousErrorHandling&&$&&($.errorThrown=!0,$.error=e):P(e)}function z(e,t){var n=L.onStoppedNotification;n&&M.setTimeout(function(){return n(e,t)})}var W={closed:!0,next:F,error:function(e){throw e},complete:F};function Y(e,t,n,r,i){return new H(e,t,n,r,i)}var H=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t)||this;return s.onFinalize=o,s.shouldUnsubscribe=a,s._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return(0,k.ZT)(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),n||null===(t=this.onFinalize)||void 0===t||t.call(this)}},t}(B);function J(e,t){return _(function(n,r){var i,o,a,s=0;n.subscribe(new H(r,function(n){r.next(e.call(t,n,s++))},void 0,void 0,void 0))})}function X(e){let t=new Set;for(let n of e.attributes||[]){if(n?.type==="auth"&&"object"==typeof n?.properties&&Array.isArray(n?.properties?.rules)&&(n?.properties?.rules).every(e=>!!e.allow))for(let e of n.properties.rules)"owner"===e.allow?t.add(e.ownerField||"owner"):"groups"===e.allow&&void 0!==e.groupsField&&t.add(e.groupsField)}return Array.from(t)}function Z(e){return`${e[0].toUpperCase()}${e.slice(1)}`}function ee(e){let t,n;let r=new Promise((e,r)=>{t=e,n=r});return e(r).then(e=>{t(e)}).catch(e=>{n(e)}),r}let et=new WeakMap;function en(e,t){return et.set(t,e),e.finally(()=>{et.delete(t)})}let er={HAS_ONE:"HAS_ONE",HAS_MANY:"HAS_MANY",BELONGS_TO:"BELONGS_TO"},ei={ID:"ID",String:"String",AWSDate:"String",AWSTime:"String",AWSDateTime:"String",AWSTimestamp:"Int",AWSEmail:"String",AWSPhone:"String",AWSURL:"String",AWSIPAddress:"String",AWSJSON:"String",Boolean:"Boolean",Int:"Int",Float:"Float"},eo=e=>1===e.length?e[0]:e.reduce((e,t,n)=>0===n?t:e+Z(t),""),ea=(e,t,n)=>{if(!n)return null;let r={};for(let[i,o]of Object.entries(n)){let n=t?e.models[t]?.fields[i]:void 0,a={fieldDef:n,value:o};"object"==typeof a.fieldDef?.type&&"model"in a.fieldDef.type&&"string"==typeof a.fieldDef.type.model&&a.fieldDef.isArray&&Array.isArray(a.value?.items)?r[i]=a.value.items.map(t=>ea(e,a.fieldDef.type.model,t)):"object"==typeof n?.type&&"model"in n.type&&"string"==typeof n.type.model?r[i]=ea(e,n.type.model,o):r[i]=o}return r};function es(e,t,n,r,i,o,a=!1){let s=r.models[t],c=s.fields,u=Object.entries(c).filter(([e,t])=>t?.type?.model!==void 0).map(([e])=>e);return n.map(t=>{if(null==t)return t;let n={};for(let l of u){let u=c[l],p=(u?.type).model,d=r.models[p],f=d.primaryKeyInfo.primaryKeyFieldName,h=d.primaryKeyInfo.sortKeyFieldNames,m=u.association?.connectionType,y=[];u.association&&"associatedWith"in u.association&&(y=u.association.associatedWith);let v=[];switch(u.association&&"targetNames"in u.association&&v.push(...u.association.targetNames),m){case er.BELONGS_TO:{let r=h.reduce((e,n)=>{if(t[n])return e[n]=t[n]},{});if(e.models[p]?.get===void 0)break;a?n[l]=(n,a)=>t[v[0]]?e.models[p].get(n,{[f]:t[v[0]],...r},{authMode:a?.authMode||i,authToken:a?.authToken||o}):{data:null}:n[l]=n=>t[v[0]]?e.models[p].get({[f]:t[v[0]],...r},{authMode:n?.authMode||i,authToken:n?.authToken||o}):{data:null};break}case er.HAS_ONE:case er.HAS_MANY:{let r=m===er.HAS_ONE?e=>({data:e?.data.shift()||null,errors:e.errors,extensions:e.extensions}):e=>e,c=s.primaryKeyInfo.primaryKeyFieldName,u=s.primaryKeyInfo.sortKeyFieldNames,f=d.fields[y[0]];if(f.type.model){let s=[];f.association&&"targetNames"in f.association&&(s=f.association?.targetNames);let d=s.map((e,n)=>0===n?{[e]:{eq:t[c]}}:{[e]:{eq:t[u[n-1]]}});if(e.models[p]?.list===void 0)break;a?n[l]=(n,a)=>t[c]?ee(async t=>{let s=en(e.models[p].list(n,{filter:{and:d},limit:a?.limit,nextToken:a?.nextToken,authMode:a?.authMode||i,authToken:a?.authToken||o}),t);return r(await s)}):[]:n[l]=n=>t[c]?ee(async t=>{let a=en(e.models[p].list({filter:{and:d},limit:n?.limit,nextToken:n?.nextToken,authMode:n?.authMode||i,authToken:n?.authToken||o}),t);return r(await a)}):[];break}let h=y.map((e,n)=>0===n?{[e]:{eq:t[c]}}:{[e]:{eq:t[u[n-1]]}});if(e.models[p]?.list===void 0)break;a?n[l]=(n,a)=>t[c]?ee(async t=>{let s=en(e.models[p].list(n,{filter:{and:h},limit:a?.limit,nextToken:a?.nextToken,authMode:a?.authMode||i,authToken:a?.authToken||o}),t);return r(await s)}):[]:n[l]=n=>t[c]?ee(async t=>{let a=en(e.models[p].list({filter:{and:h},limit:n?.limit,nextToken:n?.nextToken,authMode:n?.authMode||i,authToken:n?.authToken||o}),t);return r(await a)}):[]}}}return{...t,...n}})}let ec={CREATE:{operationPrefix:"create",usePlural:!1},GET:{operationPrefix:"get",usePlural:!1},UPDATE:{operationPrefix:"update",usePlural:!1},DELETE:{operationPrefix:"delete",usePlural:!1},LIST:{operationPrefix:"list",usePlural:!0},INDEX_QUERY:{operationPrefix:"",usePlural:!1},ONCREATE:{operationPrefix:"onCreate",usePlural:!1},ONUPDATE:{operationPrefix:"onUpdate",usePlural:!1},ONDELETE:{operationPrefix:"onDelete",usePlural:!1},OBSERVEQUERY:{operationPrefix:"observeQuery",usePlural:!1}},eu=(e,t)=>{let{fields:n}=e;return Object.fromEntries(Object.values(n).map(({type:e,name:n})=>"string"==typeof e.enum?[n,ep]:"string"==typeof e.nonModel?[n,eu(t.nonModels[e.nonModel],t)]:"string"==typeof e?[n,ep]:void 0).filter(e=>void 0!==e))},el=(e,t)=>{let{fields:n}=e,r=Object.values(n).map(({type:e,name:n})=>"string"==typeof e.enum||"string"==typeof e?[n,ep]:"string"==typeof e.nonModel?[n,eu(t.nonModels[e.nonModel],t)]:void 0).filter(e=>void 0!==e),i=X(e).map(e=>[e,ep]);return Object.fromEntries(r.concat(i))},ep="";function ed(e){let t=[];return Object.entries(e).forEach(([e,n])=>{n===ep?t.push(e):"object"==typeof n&&null!==n&&(n?.items?t.push(e,"{","items","{",ed(n.items),"}","}"):t.push(e,"{",ed(n),"}"))}),t.join(" ")}function ef(e,t,n){let r=e.models[t];return ed(function(e,t,n){let r=(t,n)=>{let[i,...o]=t.split("."),a=o[0],s=e.models[n]??e.nonModels[n],c=s?.fields,u=c?.[i]?.type?.model,l=e.models[u],p=c?.[i]?.type?.nonModel,d=e.nonModels[p],f=l?"model":d?"nonModel":"field";if("nonModel"===f){if(!a)throw Error(`${i} must declare a wildcard (*) or a field of custom type ${p}`);return"*"===a?{[i]:eu(d,e)}:{[i]:r(o.join("."),p)}}if("model"===f){let t={};if(!a)throw Error(`${i} must declare a wildcard (*) or a field of model ${u}`);return t="*"===a?{[i]:el(e.models[u],e)}:{[i]:r(o.join("."),u)},c[i]?.isArray&&(t={[i]:{items:t[i]}}),t}{let t=c?.[i],r=e.nonModels[n],o=r?.fields?.[i];if(r){if(!o)throw Error(`${i} is not a field of custom type ${n}`)}else{let e=X(s).includes(i);if(!t&&!e)throw Error(`${i} is not a field of model ${n}`)}return{[i]:ep}}};return n.reduce((e,n)=>(function e(t,n){let r=e=>e&&"object"==typeof e;for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(Object.prototype.hasOwnProperty.call(n,i)&&r(n[i])?e(t[i],n[i]):n[i]=t[i]);return n})(r(n,t),e),{})}(e,t,n??function(e){let{fields:t}=e,n=Object.values(t).map(({type:e,name:t})=>{if("string"==typeof e)return t;if("object"==typeof e){if("string"==typeof e?.enum)return t;if("string"==typeof e?.nonModel)return`${t}.*`}}).filter(Boolean),r=X(e);return Array.from(new Set(n.concat(r)))}(r)))}function eh(e,t,n,r,i){let o,a,s,c,u;let{name:l,pluralName:p,fields:d,primaryKeyInfo:{isCustomPrimaryKey:f,primaryKeyFieldName:h,sortKeyFieldNames:m},attributes:y}=e.models[t],v=l.charAt(0).toUpperCase()+l.slice(1),E=p.charAt(0).toUpperCase()+p.slice(1),{operationPrefix:b,usePlural:T}=ec[n],{selectionSet:g}=r||{};if(b)o=`${b}${T?E:v}`;else if(i){let{queryField:e,pk:n,sk:r=[]}=i;o=e;let s={};if(1===r.length){let[e]=r,t=ei["string"==typeof d[e].type?d[e].type:"String"];s={[e]:`Model${t}KeyConditionInput`}}else if(r.length>1){let n=eo(r),i=y?.find(t=>t?.properties?.queryField===e)?.properties?.name;s={[n]:`Model${Z(t)}${Z(i)}CompositeKeyConditionInput`}}a={[n]:`${Object.prototype.hasOwnProperty.call(d[n].type,"enum")?d[n].type.enum:d[n].type}!`,...s}}else throw Error("Error generating GraphQL Document - invalid operation name");let N=ef(e,t,g),S={[h]:`${d[h].type}!`},O={},A=e=>{if(0===m.length)return{};if("get"===e)return m.reduce((t,n)=>{let r=d[n].type;return"get"===e&&(t[n]=`${r}!`),t},{});if(1!==m.length)return{[eo(m)]:`Model${Z(t)}PrimaryCompositeKeyConditionInput`};{let[e]=m,t=ei["string"==typeof d[e].type?d[e].type:"String"];return{[e]:`Model${t}KeyConditionInput`}}};switch(f&&(Object.assign(S,A("get")),Object.assign(O,{[h]:`${d[h].type}`,sortDirection:"ModelSortDirection"},A("list"))),n){case"CREATE":case"UPDATE":case"DELETE":u??(u={input:`${b.charAt(0).toLocaleUpperCase()+b.slice(1)}${v}Input!`}),s??(s="mutation");case"GET":u??(u=S),c??(c=N);case"LIST":u??(u={...O,filter:`Model${v}FilterInput`,limit:"Int",nextToken:"String"}),s??(s="query"),c??(c=`items { ${N} } nextToken __typename`);case"INDEX_QUERY":u??(u={...a,filter:`Model${v}FilterInput`,sortDirection:"ModelSortDirection",limit:"Int",nextToken:"String"}),s??(s="query"),c??(c=`items { ${N} } nextToken __typename`);case"ONCREATE":case"ONUPDATE":case"ONDELETE":u??(u={filter:`ModelSubscription${v}FilterInput`}),s??(s="subscription"),c??(c=N);break;default:throw Error("Internal error: Attempted to generate graphql document for observeQuery. Please report this error.")}return`${s}${u?`(${Object.entries(u).map(([e,t])=>`$${e}: ${t}`)})`:""} { ${o}${u?`(${Object.keys(u).map(e=>`${e}: $${e}`)})`:""} { ${c} } }`}function em(e,t,n,r,i){let{fields:o,primaryKeyInfo:{isCustomPrimaryKey:a,primaryKeyFieldName:s,sortKeyFieldNames:c}}=e,u=c?.length&&eo(c),l={};switch(t){case"CREATE":l={input:n?ey(n,e,r):{}};break;case"UPDATE":l={input:n?Object.fromEntries(Object.entries(ey(n,e,r)).filter(([e])=>{let{isReadOnly:t}=o[e];return!t})):{}};break;case"GET":case"DELETE":n&&(l=a?[s,...c].reduce((e,t)=>(e[t]=n[t],e),{}):{[s]:n[s]}),"DELETE"===t&&(l={input:l});break;case"LIST":n?.filter&&(l.filter=n.filter),n?.sortDirection&&(l.sortDirection=n.sortDirection),n&&n[s]&&(l[s]=n[s]),u&&n&&n[u]&&(l[u]=n[u]),n?.nextToken&&(l.nextToken=n.nextToken),n?.limit&&(l.limit=n.limit);break;case"INDEX_QUERY":{let{pk:e,sk:t=[]}=i,r=t?.length&&eo(t);l[e]=n[e],r&&n&&n[r]&&(l[r]=n[r]),n?.filter&&(l.filter=n.filter),n?.sortDirection&&(l.sortDirection=n.sortDirection),n?.nextToken&&(l.nextToken=n.nextToken),n?.limit&&(l.limit=n.limit);break}case"ONCREATE":case"ONUPDATE":case"ONDELETE":n?.filter&&(l={filter:n.filter});break;case"OBSERVEQUERY":throw Error("Internal error: Attempted to build variables for observeQuery. Please report this error.");default:throw Error(`Unhandled operation case: ${t}`)}return l}function ey(e,t,n){let{fields:r}=t,i={};return Object.entries(e).forEach(([e,t])=>{let o=r[e]?.type,a=o?.model;if(a){let o=r[e]?.association,s=n.models[a].primaryKeyInfo;o?.connectionType===er.HAS_ONE&&o.targetNames.forEach((e,n)=>{let r=o.associatedWith[n];i[e]=t[r]}),o?.connectionType===er.BELONGS_TO&&o.targetNames.forEach((e,n)=>{if(0===n){let n=s.primaryKeyFieldName;i[e]=t[n]}else{let r=s.sortKeyFieldNames[n-1];i[e]=t[r]}})}else i[e]=t}),i}function ev(e,t,n={}){let r=t(e);return{authMode:n.authMode||r.authMode,authToken:n.authToken||r.authToken}}function eE(e,t,n){let r=t(e).headers||{};return n&&(r=n),r}function eb(e){if(e?.errors)return{...e,data:[]};throw e}function eT(e){if(e.errors)return{...e,data:null};throw e}let eg=Symbol("INTERNAL_USER_AGENT_OVERRIDE");(a=m||(m={})).CreateConversation="1",a.GetConversation="2",a.ListConversations="3",a.DeleteConversation="4",a.SendMessage="5",a.ListMessages="6",a.OnMessage="7",a.Generation="8";let eN=e=>({category:"ai",action:e});function eS(e){return e?{[eg]:e}:void 0}let eO=e=>"symbol"==typeof e?.token?.value;function eA(e,t,n,r,i,o,a){let s=void 0!==r.arguments;return(...c)=>{var u,l;let p,d;let f=c[c.length-1];if(i){if(eO(c[0]))p=c[0];else throw Error(`Invalid first argument passed to ${r.name}. Expected contextSpec`)}return(s&&(d=i?c[1]:c[0]),"subscription"===n)?function(e,t,n,r,i,o,a){let{name:s}=n,c=ev(e,r,o),u=eE(e,r,o?.headers),l=e_(n),p=ek(n),d=ew(t,n),f=eI(n.type,"model")?n.type.model:void 0,h=`
    ${"subscription".toLocaleLowerCase()}${l} {
      ${s}${p} ${d}
    }
  `,m=eC(n,i),y=eS(a);return e.graphql({...c,query:h,variables:m,...y},u).pipe(J(n=>{let[r]=Object.keys(n.data),i=n.data[r],[o]=f?es(e,f,[i],t,c.authMode,c.authToken):[i];return o}))}(e,t,r,o,d,f,a):(u=d,l=p,ee(async i=>{let{name:s}=r,c=ev(e,o,f),p=eE(e,o,f?.headers),d=e_(r),h=ek(r),m=ew(t,r),y=eI(r.type,"model")?r.type.model:void 0,v=`
    ${n.toLocaleLowerCase()}${d} {
      ${s}${h} ${m}
    }
  `,E=eC(r,u),b=eS(a);try{let n=l?e.graphql(l,{...c,query:v,variables:E},p):e.graphql({...c,query:v,variables:E,...b},p),r=en(n,i),{data:o,extensions:a}=await r;if(!o)return{data:null,extensions:a};{let[n]=Object.keys(o),r=Array.isArray(o[n]),i=r?o[n].filter(e=>e):o[n],s=y?es(e,y,r?i:[i],t,c.authMode,c.authToken,!!l):i;return{data:!r&&Array.isArray(s)?s.shift():s,extensions:a}}}catch(i){let{data:n,errors:r}=i;if(!n||0===Object.keys(n).length||!r)return eT(i);{let[o]=Object.keys(n),a=Array.isArray(n[o]),s=a?n[o].filter(e=>e):n[o];if(!s)return eT(i);{let n=y?es(e,y,a?s:[s],t,c.authMode,c.authToken,!!l):s;return{data:!a&&Array.isArray(n)?n.shift():n,errors:r}}}}}))}}function eI(e,t){return"string"==typeof e[t]}function e_(e){if(void 0===e.arguments)return"";let t=Object.entries(e.arguments).map(([e,t])=>{let n=function({type:e,isRequired:t}){let n=t?"!":"";return e instanceof Object&&"enum"in e?`${e.enum}${n}`:e instanceof Object&&"input"in e?`${e.input}${n}`:`${e}${n}`}(t),r=t.isArray?`[${n}]${t.isArrayNullable?"":"!"}`:n;return`$${e}: ${r}`}).join(", ");return t.length>0?`(${t})`:""}function ek(e){if(void 0===e.arguments)return"";let t=Object.keys(e.arguments).map(e=>`${e}: $${e}`).join(", ");return t.length>0?`(${t})`:""}function ew(e,t){if(eI(t,"type")||eI(t.type,"enum"))return"";if(eI(t.type,"nonModel")){let n=e.nonModels[t.type.nonModel];return`{${ed(eu(n,e))}}`}return eI(t.type,"model")?`{${ef(e,t.type.model)}}`:""}function eC(e,t={}){let n={};if(void 0===e.arguments)return n;for(let r of Object.values(e.arguments))if(void 0!==t[r.name])n[r.name]=t[r.name];else if(r.isRequired)throw Error(`${e.name} requires arguments '${r.name}'`);return n}let eD={queries:"query",mutations:"mutation",subscriptions:"subscription"};function ex(e,t,n,r){if(!t)return{};let i=t.modelIntrospection;if(!i)return{};let o=i[n];if(!o)return{};let a={},s=null===r(e).amplify;for(let t of Object.values(o))a[t.name]=eA(e,i,eD[n],t,s,r);return a}function eR(e,t,n,r,i,o=!1,a){return o?(o,s,c)=>eL(e,t,n,s,c,r,i,o,a):(o,s)=>eL(e,t,n,o,s,r,i,void 0,a)}function eL(e,t,n,r,i,o,a,s,c){return ee(async u=>{let{name:l}=n,p=eh(t,l,o,i),d=em(n,o,r,t),f=ev(e,a,i),h=eE(e,a,i?.headers),m=eS(c);try{let n=s?e.graphql(s,{...f,query:p,variables:d},h):e.graphql({...f,query:p,variables:d,...m},h),r=en(n,u),{data:o,extensions:a}=await r;if(!o)return{data:null,extensions:a};{let[n]=Object.keys(o),r=ea(t,l,o[n]);if(null===r)return{data:null,extensions:a};if(i?.selectionSet)return{data:r,extensions:a};{let[n]=es(e,l,[r],t,f.authMode,f.authToken,!!s);return{data:n,extensions:a}}}}catch(o){let{data:n,errors:r}=o;if(!n||0===Object.keys(n).length||!r)return eT(o);{let[a]=Object.keys(n),c=ea(t,l,n[a]);if(!c)return eT(o);if(i?.selectionSet)return{data:c,errors:r};{let[n]=es(e,l,[c],t,f.authMode,f.authToken,!!s);return{data:n,errors:r}}}}})}function eM(e,t,n,r,i=!1,o){return i?(i,a)=>eP(e,t,n,r,a,i,o):i=>eP(e,t,n,r,i,void 0,o)}function eP(e,t,n,r,i,o,a){return ee(async s=>{let{name:c}=n,u=eh(t,c,"LIST",i),l=em(n,"LIST",i,t),p=ev(e,r,i),d=eE(e,r,i?.headers),f=eS(a);try{let n=o?e.graphql(o,{...p,query:u,variables:l},d):e.graphql({...p,query:u,variables:l,...f},d),r=en(n,s),{data:a,extensions:h}=await r;if(void 0!==a){let[n]=Object.keys(a);if(a[n].items){let r=a[n].items.map(e=>ea(t,c,e));if(i?.selectionSet)return{data:r,nextToken:a[n].nextToken,extensions:h};return{data:es(e,c,r,t,p.authMode,p.authToken,!!o),nextToken:a[n].nextToken,extensions:h}}return{data:a[n],nextToken:a[n].nextToken,extensions:h}}}catch(a){let{data:n,errors:r}=a;if(null==n||0===Object.keys(n).length||!r)return eb(a);{let[s]=Object.keys(n);if(!n[s]?.items)return eb(a);{let a=n[s].items.map(e=>ea(t,c,e));if(a){if(i?.selectionSet)return{data:a,nextToken:n[s]?.nextToken,errors:r};return{data:es(e,c,a,t,p.authMode,p.authToken,!!o),nextToken:n[s]?.nextToken,errors:r}}return{data:n[s],nextToken:n[s]?.nextToken,errors:r}}}}})}let eF={},ej=Array(64);for(let e=0;e+65<=90;e++){let t=String.fromCharCode(e+65);eF[t]=e,ej[e]=t}for(let e=0;e+97<=122;e++){let t=String.fromCharCode(e+97),n=e+26;eF[t]=n,ej[n]=t}for(let e=0;e<10;e++){eF[e.toString(10)]=e+52;let t=e.toString(10),n=e+52;eF[t]=n,ej[n]=t}eF["+"]=62,ej[62]="+",eF["/"]=63,ej[63]="/";let eU=e=>{let t=e.length/4*3;"=="===e.slice(-2)?t-=2:"="===e.slice(-1)&&t--;let n=new ArrayBuffer(t),r=new DataView(n);for(let t=0;t<e.length;t+=4){let n=0,i=0;for(let r=t,o=t+3;r<=o;r++)if("="!==e[r]){if(!(e[r]in eF))throw TypeError(`Invalid character ${e[r]} in base64 string.`);n|=eF[e[r]]<<(o-r)*6,i+=6}else n>>=6;let o=t/4*3;n>>=i%8;let a=Math.floor(i/8);for(let e=0;e<a;e++){let t=(a-e-1)*8;r.setUint8(o+e,(n&255<<t)>>t)}}return new Uint8Array(n)},e$=e=>new TextEncoder().encode(e),eB=e=>e.map(e=>e.image?eG(e):e.toolUse?eV(e):e.toolResult?eq(e):eQ(e)),eG=({image:e})=>({image:{...e,source:{...e.source,bytes:eU(e.source.bytes)}}}),eK=({json:e})=>({json:JSON.parse(e)}),eV=({toolUse:e})=>({toolUse:{...e,input:JSON.parse(e.input)}}),eq=({toolResult:e})=>({toolResult:{toolUseId:e.toolUseId,content:e.content.map(e=>e.image?eG(e):e.json?eK(e):eQ(e))}}),eQ=e=>Object.fromEntries(Object.entries(e).filter(([e,t])=>null!==t)),ez=({content:e,createdAt:t,id:n,conversationId:r,role:i})=>({content:eB(e),conversationId:r,createdAt:t,id:n,role:i}),eW=(e,t,n,r,i)=>async o=>{let a=eM(e,t,r,i,!1,eN(m.ListMessages)),{data:s,nextToken:c,errors:u}=await a({...o,filter:{conversationId:{eq:n}}});return{data:s.map(e=>ez(e)),nextToken:c,errors:u}},eY=(e,t,n,r,i)=>o=>{let{conversations:a}=t;return a?eA(e,t,"subscription",a[r].message.subscribe,!1,i,eN(m.OnMessage))({conversationId:n}).subscribe(e=>{o(ez(e))}):{}},eH=e=>JSON.stringify(e),eJ=e=>e.map(e=>e.image?eZ(e):e.toolResult?e1(e):e),eX=({tools:e})=>({tools:Object.entries(e).map(([e,t])=>({toolSpec:{name:e,description:t.description,inputSchema:{json:JSON.stringify(t.inputSchema.json)}}}))}),eZ=({image:e})=>({image:{...e,source:{...e.source,bytes:function(e){let t;let n="object"==typeof(t="string"==typeof e?e$(e):e)&&"number"==typeof t.length,r="object"==typeof t&&"number"==typeof t.byteOffset&&"number"==typeof t.byteLength;if(!n&&!r)throw Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let i="";for(let e=0;e<t.length;e+=3){let n=0,r=0;for(let i=e,o=Math.min(e+3,t.length);i<o;i++)n|=t[i]<<(o-i-1)*8,r+=8;let o=Math.ceil(r/6);n<<=6*o-r;for(let e=1;e<=o;e++){let t=(o-e)*6;i+=ej[(n&63<<t)>>t]}i+="==".slice(0,4-o)}return i}(e.source.bytes)}}}),e0=({json:e})=>({json:JSON.stringify(e)}),e1=({toolResult:e})=>({toolResult:{...e,content:e.content.map(e=>e.image?eZ(e):e.json?e0(e):e)}}),e2=(e,t,n,r,i)=>async o=>{let{conversations:a}=t;if(!a)return{};let{content:s,aiContext:c,toolConfiguration:u}="string"==typeof o?{content:[{text:o}]}:o,l=eA(e,t,"mutation",a[r].message.send,!1,i,eN(m.SendMessage)),{data:p,errors:d}=await l({conversationId:n,content:eJ(s),...c&&{aiContext:eH(c)},...u&&{toolConfiguration:eX(u)}});return{data:p?ez(p):p,errors:d}},e3=(e,t,n,r,i,o,a,s,c,u)=>{if(!n)throw Error(`An error occurred converting a ${o} conversation: Missing ID`);return{id:n,createdAt:r,updatedAt:i,metadata:c,name:u,onMessage:eY(e,t,n,o,s),sendMessage:e2(e,t,n,o,s),listMessages:eW(e,t,n,a,s)}},e4=(e,t,n,r,i,o)=>async()=>{let a=eR(e,t,r,"CREATE",o,!1,eN(m.CreateConversation)),{data:s,errors:c}=await a();return{data:e3(e,t,s?.id,s?.createdAt,s?.updatedAt,n,i,o,s?.metadata,s?.name),errors:c}},e5=(e,t,n,r,i,o)=>async({id:a})=>{let s=eR(e,t,r,"GET",o,!1,eN(m.GetConversation)),{data:c,errors:u}=await s({id:a});return{data:c?e3(e,t,c.id,c.createdAt,c.updatedAt,n,i,o,c?.metadata,c?.name):c,errors:u}},e6=(e,t,n,r,i,o)=>async a=>{let s=eM(e,t,r,o,!1,eN(m.ListConversations)),{data:c,nextToken:u,errors:l}=await s(a);return{data:c.map(r=>e3(e,t,r.id,r.createdAt,r.updatedAt,n,i,o,r?.metadata,r?.name)),nextToken:u,errors:l}},e9=(e,t,n,r,i,o)=>async({id:a})=>{let s=eR(e,t,r,"DELETE",o,!1,eN(m.DeleteConversation)),{data:c,errors:u}=await s({id:a});return{data:c?e3(e,t,c?.id,c?.createdAt,c?.updatedAt,n,i,o,c?.metadata,c?.name):c,errors:u}},e8=e=>{let t=e.modelIntrospection;if(!t)return{};let n={};for(let[e,r]of Object.entries(t.enums))n[r.name]={values:()=>r.values};return n};function e7(e,t,n,r,i,o,a){return ee(async s=>{let{name:c}=n,u=eh(t,c,"INDEX_QUERY",o,r),l=em(n,"INDEX_QUERY",o,t,r),p=ev(e,i,o),d=n=>es(e,c,n,t,p.authMode,p.authToken,!!a);try{let n=eE(e,i,o?.headers),r=[{...p,query:u,variables:l},n];void 0!==a&&r.unshift(a);let f=e.graphql(...r),h=en(f,s),m=await h;if(void 0!==m.data)return function(e,t,n,r,i){let{data:o,extensions:a}=n,[s]=Object.keys(o);if(o[s].items){let n=o[s].items.map(n=>ea(e,t,n));return{data:r?n:i(n),nextToken:o[s].nextToken,extensions:a}}return{data:o[s],nextToken:o[s].nextToken,extensions:a}}(t,c,m,o?.selectionSet,d)}catch(r){let{data:e,errors:n}=r;if(void 0===e||0===Object.keys(e).length||!n)return eb(r);{let[n]=Object.keys(e);if(e[n]?.items){let r=e[n]?.items.map(e=>ea(t,c,e));if(r)return{data:o?.selectionSet?r:d(r),nextToken:e[n]?.nextToken}}return{data:e[n],nextToken:e[n]?.nextToken}}}})}var te="function"==typeof Symbol&&Symbol.observable||"@@observable",tt=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,i=this,o=(r=e)&&r instanceof B||r&&I(r.next)&&I(r.error)&&I(r.complete)&&x(r)?e:new q(e,t,n);return function(e){if(L.useDeprecatedSynchronousErrorHandling){var t=!$;if(t&&($={errorThrown:!1,error:null}),e(),t){var n=$,r=n.errorThrown,i=n.error;if($=null,r)throw i}}else e()}(function(){var e=i.operator,t=i.source;o.add(e?e.call(o,t):t?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=tn(t))(function(t,r){var i=new q({next:function(t){try{e(t)}catch(e){r(e),i.unsubscribe()}},error:r,complete:t});n.subscribe(i)})},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[te]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===e.length?function(e){return e}:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=tn(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function tn(e){var t;return null!==(t=null!=e?e:L.Promise)&&void 0!==t?t:Promise}let tr=e=>"key"===e.type&&e.properties?.name&&e.properties?.queryField&&e.properties?.fields.length>0,ti=e=>e.attributes?.filter(tr).map(e=>{let t=e.properties.queryField,[n,...r]=e.properties.fields;return{queryField:t,pk:n,sk:r}})||[],to=(e,t)=>{let n=e.models[t].attributes?.find(e=>"model"===e.type),r={queries:["list","get","observeQuery"],mutations:["create","update","delete"],subscriptions:["onCreate","onUpdate","onDelete"]},i=[];if(!n)return ec;if(n.properties)for(let[e,t]of Object.entries(n.properties))e in r&&(null===t?i.push(...r[e]):t instanceof Object&&i.push(...Object.keys(t)));i.includes("list")&&i.push("observeQuery");let o=i.map(e=>e.toUpperCase());return Object.fromEntries(Object.entries(ec).filter(([e])=>!o.includes(e)))};function ta(e,t,n){return!function(e){let t=e.cancel.bind(e);e.cancel=function(e,n){let r=new Set,i=e;for(;i&&et.has(i);){if(r.has(i))throw Error("A cycle was detected in the modeled graphql cancellation chain. This is a bug. Please report it!");r.add(i),i=et.get(i)}return t(i,n)}}(e),e.models=function(e,t,n){let r={},i=t.modelIntrospection;if(!i)return{};let o=["ONCREATE","ONUPDATE","ONDELETE"];for(let t of Object.values(i.models)){let{name:a}=t;for(let s of(r[a]={},Object.entries(to(i,a)).forEach(([s,{operationPrefix:c}])=>{"LIST"===s?r[a][c]=eM(e,i,t,n):o.includes(s)?r[a][c]=function(e,t,n,r,i){let{name:o}=n;return a=>{let s=eh(t,o,r,a),c=em(n,r,a,t),u=ev(e,i,a),l=eE(e,i,a?.headers);return e.graphql({...u,query:s,variables:c},l).pipe(J(n=>{let[r]=Object.keys(n.data),i=ea(t,o,n.data[r]);if(null===i)return null;if(a?.selectionSet)return i;{let[n]=es(e,o,[i],t,u.authMode,u.authToken);return n}}))}}(e,i,t,s,n):"OBSERVEQUERY"===s?r[a][c]=function(e,t){let{name:n}=t;return r=>new tt(i=>{let o=[],a=[],s=(...e)=>a.push(...e),c=e[n].onCreate(r).subscribe({next(e){s({item:e,type:"create"})},error(e){i.error({type:"onCreate",error:e})}}),u=e[n].onUpdate(r).subscribe({next(e){s({item:e,type:"update"})},error(e){i.error({type:"onUpdate",error:e})}}),l=e[n].onDelete(r).subscribe({next(e){s({item:e,type:"delete"})},error(e){i.error({type:"onDelete",error:e})}});function p(e){for(let t of e){let e=function(e,t,n){let r=Object.fromEntries(n.map(t=>[t,e[t]]));for(let e=0;e<t.length;e++)if(Object.keys(r).every(n=>r[n]===t[e][n]))return e;return -1}(t.item,o,d);switch(t.type){case"create":e<0&&o.push(t.item);break;case"update":e>=0&&(o[e]=t.item);break;case"delete":e>=0&&o.splice(e,1);break;default:console.error("Unrecognized message in observeQuery.",t)}}i.next({items:o,isSynced:!0})}let d=function(e){let{primaryKeyFieldName:t,sortKeyFieldNames:n}=e.primaryKeyInfo;return[t,...n]}(t);return(async()=>{let t=!0,c=null;for(;!i.closed&&(t||c);){t=!1;let{data:s,errors:u,nextToken:l}=await e[n].list({...r,nextToken:c});c=l,o.push(...s);let p=0===a.length&&null==c;if(i.next({items:o,isSynced:p}),Array.isArray(u))for(let e of u)i.error(e)}a.length>0&&p(a),s=(...e)=>(p(e),o.length)})(),()=>{c.unsubscribe(),u.unsubscribe(),l.unsubscribe()}})}(r,t):r[a][c]=eR(e,i,t,s,n)}),ti(t)))r[a][s.queryField]=function(e,t,n,r,i,o=!1){return o?(o,a,s)=>e7(e,t,n,r,i,{...a,...s},o):(o,a)=>e7(e,t,n,r,i,{...o,...a})}(e,i,t,s,n)}return r}(e,t,n),e.enums=e8(t),e.queries=ex(e,t,"queries",n),e.mutations=ex(e,t,"mutations",n),e.subscriptions=ex(e,t,"subscriptions",n),e.conversations=function(e,t,n){let r=t?.modelIntrospection;if(!r?.conversations)return{};let i={};for(let{name:t,conversation:o,message:a,models:s,nonModels:c,enums:u}of Object.values(r.conversations)){let l=s[o.modelName],p=s[a.modelName];if(!l||!p)return{};let d={...r,models:{...r.models,...s},nonModels:{...r.nonModels,...c},enums:{...r.enums,...u}};i[t]={create:e4(e,d,t,l,p,n),get:e5(e,d,t,l,p,n),delete:e9(e,d,t,l,p,n),list:e6(e,d,t,l,p,n)}}return i}(e,t,n),e.generations=function(e,t,n){let r=t?.modelIntrospection;if(!r?.generations)return{};let i={};for(let t of Object.values(r.generations))i[t.name]=eA(e,r,"query",t,!1,n,eN(m.Generation));return i}(e,t,n),e}(s=y||(y={})).NO_API_KEY="No api-key configured",s.NO_CURRENT_USER="No current user",s.NO_CREDENTIALS="No credentials",s.NO_FEDERATED_JWT="No federated jwt",s.NO_AUTH_TOKEN="No auth token specified";let ts=Symbol("amplify"),tc=Symbol("authMode"),tu=Symbol("authToken"),tl=Symbol("headers");function tp(e){return{amplify:e[ts],authMode:e[tc],authToken:e[tu],headers:e[tl]}}var td=n(5230);function tf(e){return(tf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var th="function"==typeof Symbol&&null!=Symbol.toStringTag?Symbol.toStringTag:"@@toStringTag";function tm(e,t){for(var n,r=/\r\n|[\n\r]/g,i=1,o=t+1;(n=r.exec(e.body))&&n.index<t;)i+=1,o=t+1-(n.index+n[0].length);return{line:i,column:o}}function ty(e,t){var n=e.locationOffset.column-1,r=tE(n)+e.body,i=t.line-1,o=e.locationOffset.line-1,a=t.line+o,s=1===t.line?n:0,c=t.column+s,u="".concat(e.name,":").concat(a,":").concat(c,"\n"),l=r.split(/\r\n|[\n\r]/g),p=l[i];if(p.length>120){for(var d=Math.floor(c/80),f=c%80,h=[],m=0;m<p.length;m+=80)h.push(p.slice(m,m+80));return u+tv([["".concat(a),h[0]]].concat(h.slice(1,d+1).map(function(e){return["",e]}),[[" ",tE(f-1)+"^"],["",h[d+1]]]))}return u+tv([["".concat(a-1),l[i-1]],["".concat(a),p],["",tE(c-1)+"^"],["".concat(a+1),l[i+1]]])}function tv(e){var t=e.filter(function(e){return e[0],void 0!==e[1]}),n=Math.max.apply(Math,t.map(function(e){return e[0].length}));return t.map(function(e){var t=e[0],r=e[1];return tE(n-t.length)+t+(r?" | "+r:" |")}).join("\n")}function tE(e){return Array(e+1).join(" ")}function tb(e){return(tb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tg(e,t){return t&&("object"===tb(t)||"function"==typeof t)?t:tN(e)}function tN(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tS(e){var t="function"==typeof Map?new Map:void 0;return(tS=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return tO(e,arguments,t_(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),tI(n,e)})(e)}function tO(e,t,n){return(tO=tA()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&tI(i,n.prototype),i}).apply(null,arguments)}function tA(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function tI(e,t){return(tI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function t_(e){return(t_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var tk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tI(e,t)}(i,e);var t,n,r=(t=tA(),function(){var e,n=t_(i);return e=t?Reflect.construct(n,arguments,t_(this).constructor):n.apply(this,arguments),tg(this,e)});function i(e,t,n,o,a,s,c){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),(y=r.call(this,e)).name="GraphQLError",y.originalError=null!=s?s:void 0,y.nodes=tw(Array.isArray(t)?t:t?[t]:void 0);for(var u,l=[],p=0,d=null!==(v=y.nodes)&&void 0!==v?v:[];p<d.length;p++){var f,h,m,y,v,E=d[p].loc;null!=E&&l.push(E)}l=tw(l),y.source=null!=n?n:null===(f=l)||void 0===f?void 0:f[0].source,y.positions=null!=o?o:null===(h=l)||void 0===h?void 0:h.map(function(e){return e.start}),y.locations=o&&n?o.map(function(e){return tm(n,e)}):null===(m=l)||void 0===m?void 0:m.map(function(e){return tm(e.source,e.start)}),y.path=null!=a?a:void 0;var b=null==s?void 0:s.extensions;return null==c&&"object"==tf(u=b)&&null!==u?y.extensions=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tT(Object(n),!0).forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tT(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},b):y.extensions=null!=c?c:{},(Object.defineProperties(tN(y),{message:{enumerable:!0},locations:{enumerable:null!=y.locations},path:{enumerable:null!=y.path},extensions:{enumerable:null!=y.extensions&&Object.keys(y.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),null!=s&&s.stack)?(Object.defineProperty(tN(y),"stack",{value:s.stack,writable:!0,configurable:!0}),tg(y)):(Error.captureStackTrace?Error.captureStackTrace(tN(y),i):Object.defineProperty(tN(y),"stack",{value:Error().stack,writable:!0,configurable:!0}),y)}return n=[{key:"toString",value:function(){return function(e){var t=e.message;if(e.nodes)for(var n=0,r=e.nodes;n<r.length;n++){var i,o=r[n];o.loc&&(t+="\n\n"+ty((i=o.loc).source,tm(i.source,i.start)))}else if(e.source&&e.locations)for(var a=0,s=e.locations;a<s.length;a++){var c=s[a];t+="\n\n"+ty(e.source,c)}return t}(this)}},{key:th,get:function(){return"Object"}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(i.prototype,n),i}(tS(Error));function tw(e){return void 0===e||0===e.length?void 0:e}function tC(e,t,n){return new tk("Syntax Error: ".concat(n),void 0,e,[t])}var tD=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),tx="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0;function tR(e){var t=e.prototype.toJSON;"function"==typeof t||function(e,t){throw Error("Unexpected invariant triggered.")}(0),e.prototype.inspect=t,tx&&(e.prototype[tx]=t)}var tL=function(){function e(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}return e.prototype.toJSON=function(){return{start:this.start,end:this.end}},e}();tR(tL);var tM=function(){function e(e,t,n,r,i,o,a){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=i,this.value=a,this.prev=o,this.next=null}return e.prototype.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},e}();function tP(e){return null!=e&&"string"==typeof e.kind}tR(tM);var tF=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function tj(e){return(tj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tU(e,t){switch(tj(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":if(null===e)return"null";return function(e,t){if(-1!==t.indexOf(e))return"[Circular]";var n,r,i=[].concat(t,[e]),o="function"==typeof(n=e[String(tx)])?n:"function"==typeof e.inspect?e.inspect:void 0;if(void 0!==o){var a=o.call(e);if(a!==e)return"string"==typeof a?a:tU(a,i)}else if(Array.isArray(e))return function(e,t){if(0===e.length)return"[]";if(t.length>2)return"[Array]";for(var n=Math.min(10,e.length),r=e.length-n,i=[],o=0;o<n;++o)i.push(tU(e[o],t));return 1===r?i.push("... 1 more item"):r>1&&i.push("... ".concat(r," more items")),"["+i.join(", ")+"]"}(e,i);return 0===(r=Object.keys(e)).length?"{}":i.length>2?"["+function(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){var n=e.constructor.name;if("string"==typeof n&&""!==n)return n}return t}(e)+"]":"{ "+r.map(function(t){var n=tU(e[t],i);return t+": "+n}).join(", ")+" }"}(e,t);default:return String(e)}}function t$(e,t){if(!e)throw Error(t)}var tB=function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GraphQL request",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{line:1,column:1};"string"==typeof e||t$(0,"Body must be a string. Received: ".concat(tU(e,[]),".")),this.body=e,this.name=t,this.locationOffset=n,this.locationOffset.line>0||t$(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||t$(0,"column in locationOffset is 1-indexed and must be positive.")}return function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,[{key:th,get:function(){return"Source"}}]),e}(),tG=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function tK(e){for(var t=0;t<e.length;++t)if(" "!==e[t]&&"	"!==e[t])return!1;return!0}var tV=function(){function e(e){var t=new tM(tF.SOF,0,0,0,0,null);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}var t=e.prototype;return t.advance=function(){return this.lastToken=this.token,this.token=this.lookahead()},t.lookahead=function(){var e,t=this.token;if(t.kind!==tF.EOF)do t=null!==(e=t.next)&&void 0!==e?e:t.next=function(e,t){for(var n=e.source,r=n.body,i=r.length,o=t.end;o<i;){var a=r.charCodeAt(o),s=e.line,c=1+o-e.lineStart;switch(a){case 65279:case 9:case 32:case 44:++o;continue;case 10:++o,++e.line,e.lineStart=o;continue;case 13:10===r.charCodeAt(o+1)?o+=2:++o,++e.line,e.lineStart=o;continue;case 33:return new tM(tF.BANG,o,o+1,s,c,t);case 35:return function(e,t,n,r,i){var o,a=e.body,s=t;do o=a.charCodeAt(++s);while(!isNaN(o)&&(o>31||9===o));return new tM(tF.COMMENT,t,s,n,r,i,a.slice(t+1,s))}(n,o,s,c,t);case 36:return new tM(tF.DOLLAR,o,o+1,s,c,t);case 38:return new tM(tF.AMP,o,o+1,s,c,t);case 40:return new tM(tF.PAREN_L,o,o+1,s,c,t);case 41:return new tM(tF.PAREN_R,o,o+1,s,c,t);case 46:if(46===r.charCodeAt(o+1)&&46===r.charCodeAt(o+2))return new tM(tF.SPREAD,o,o+3,s,c,t);break;case 58:return new tM(tF.COLON,o,o+1,s,c,t);case 61:return new tM(tF.EQUALS,o,o+1,s,c,t);case 64:return new tM(tF.AT,o,o+1,s,c,t);case 91:return new tM(tF.BRACKET_L,o,o+1,s,c,t);case 93:return new tM(tF.BRACKET_R,o,o+1,s,c,t);case 123:return new tM(tF.BRACE_L,o,o+1,s,c,t);case 124:return new tM(tF.PIPE,o,o+1,s,c,t);case 125:return new tM(tF.BRACE_R,o,o+1,s,c,t);case 34:if(34===r.charCodeAt(o+1)&&34===r.charCodeAt(o+2))return function(e,t,n,r,i,o){for(var a=e.body,s=t+3,c=s,u=0,l="";s<a.length&&!isNaN(u=a.charCodeAt(s));){if(34===u&&34===a.charCodeAt(s+1)&&34===a.charCodeAt(s+2))return l+=a.slice(c,s),new tM(tF.BLOCK_STRING,t,s+3,n,r,i,function(e){var t=e.split(/\r\n|[\n\r]/g),n=function(e){for(var t,n=!0,r=!0,i=0,o=null,a=0;a<e.length;++a)switch(e.charCodeAt(a)){case 13:10===e.charCodeAt(a+1)&&++a;case 10:n=!1,r=!0,i=0;break;case 9:case 32:++i;break;default:r&&!n&&(null===o||i<o)&&(o=i),r=!1}return null!==(t=o)&&void 0!==t?t:0}(e);if(0!==n)for(var r=1;r<t.length;r++)t[r]=t[r].slice(n);for(var i=0;i<t.length&&tK(t[i]);)++i;for(var o=t.length;o>i&&tK(t[o-1]);)--o;return t.slice(i,o).join("\n")}(l));if(u<32&&9!==u&&10!==u&&13!==u)throw tC(e,s,"Invalid character within String: ".concat(tq(u),"."));10===u?(++s,++o.line,o.lineStart=s):13===u?(10===a.charCodeAt(s+1)?s+=2:++s,++o.line,o.lineStart=s):92===u&&34===a.charCodeAt(s+1)&&34===a.charCodeAt(s+2)&&34===a.charCodeAt(s+3)?(l+=a.slice(c,s)+'"""',s+=4,c=s):++s}throw tC(e,s,"Unterminated string.")}(n,o,s,c,t,e);return function(e,t,n,r,i){for(var o=e.body,a=t+1,s=a,c=0,u="";a<o.length&&!isNaN(c=o.charCodeAt(a))&&10!==c&&13!==c;){if(34===c)return u+=o.slice(s,a),new tM(tF.STRING,t,a+1,n,r,i,u);if(c<32&&9!==c)throw tC(e,a,"Invalid character within String: ".concat(tq(c),"."));if(++a,92===c){switch(u+=o.slice(s,a-1),c=o.charCodeAt(a)){case 34:u+='"';break;case 47:u+="/";break;case 92:u+="\\";break;case 98:u+="\b";break;case 102:u+="\f";break;case 110:u+="\n";break;case 114:u+="\r";break;case 116:u+="	";break;case 117:var l,p,d,f,h=(l=o.charCodeAt(a+1),p=o.charCodeAt(a+2),d=o.charCodeAt(a+3),f=o.charCodeAt(a+4),tz(l)<<12|tz(p)<<8|tz(d)<<4|tz(f));if(h<0){var m=o.slice(a+1,a+5);throw tC(e,a,"Invalid character escape sequence: \\u".concat(m,"."))}u+=String.fromCharCode(h),a+=4;break;default:throw tC(e,a,"Invalid character escape sequence: \\".concat(String.fromCharCode(c),"."))}s=++a}}throw tC(e,a,"Unterminated string.")}(n,o,s,c,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(e,t,n,r,i,o){var a,s=e.body,c=n,u=t,l=!1;if(45===c&&(c=s.charCodeAt(++u)),48===c){if((c=s.charCodeAt(++u))>=48&&c<=57)throw tC(e,u,"Invalid number, unexpected digit after 0: ".concat(tq(c),"."))}else u=tQ(e,u,c),c=s.charCodeAt(u);if(46===c&&(l=!0,c=s.charCodeAt(++u),u=tQ(e,u,c),c=s.charCodeAt(u)),(69===c||101===c)&&(l=!0,(43===(c=s.charCodeAt(++u))||45===c)&&(c=s.charCodeAt(++u)),u=tQ(e,u,c),c=s.charCodeAt(u)),46===c||95===(a=c)||a>=65&&a<=90||a>=97&&a<=122)throw tC(e,u,"Invalid number, expected digit but got: ".concat(tq(c),"."));return new tM(l?tF.FLOAT:tF.INT,t,u,r,i,o,s.slice(t,u))}(n,o,a,s,c,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(e,t,n,r,i){for(var o=e.body,a=o.length,s=t+1,c=0;s!==a&&!isNaN(c=o.charCodeAt(s))&&(95===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122);)++s;return new tM(tF.NAME,t,s,n,r,i,o.slice(t,s))}(n,o,s,c,t)}throw tC(n,o,a<32&&9!==a&&10!==a&&13!==a?"Cannot contain the invalid character ".concat(tq(a),"."):39===a?"Unexpected single quote character ('), did you mean to use a double quote (\")?":"Cannot parse the unexpected character ".concat(tq(a),"."))}var u=e.line,l=1+o-e.lineStart;return new tM(tF.EOF,i,i,u,l,t)}(this,t);while(t.kind===tF.COMMENT);return t},e}();function tq(e){return isNaN(e)?tF.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function tQ(e,t,n){var r=e.body,i=t,o=n;if(o>=48&&o<=57){do o=r.charCodeAt(++i);while(o>=48&&o<=57);return i}throw tC(e,i,"Invalid number, expected digit but got: ".concat(tq(o),"."))}function tz(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function tW(e,t){return new tY(e,t).parseDocument()}var tY=function(){function e(e,t){var n=e instanceof tB?e:new tB(e);this._lexer=new tV(n),this._options=t}var t=e.prototype;return t.parseName=function(){var e=this.expectToken(tF.NAME);return{kind:tD.NAME,value:e.value,loc:this.loc(e)}},t.parseDocument=function(){var e=this._lexer.token;return{kind:tD.DOCUMENT,definitions:this.many(tF.SOF,this.parseDefinition,tF.EOF),loc:this.loc(e)}},t.parseDefinition=function(){if(this.peek(tF.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else if(this.peek(tF.BRACE_L))return this.parseOperationDefinition();else if(this.peekDescription())return this.parseTypeSystemDefinition();throw this.unexpected()},t.parseOperationDefinition=function(){var e,t=this._lexer.token;if(this.peek(tF.BRACE_L))return{kind:tD.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(t)};var n=this.parseOperationType();return this.peek(tF.NAME)&&(e=this.parseName()),{kind:tD.OPERATION_DEFINITION,operation:n,name:e,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},t.parseOperationType=function(){var e=this.expectToken(tF.NAME);switch(e.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(e)},t.parseVariableDefinitions=function(){return this.optionalMany(tF.PAREN_L,this.parseVariableDefinition,tF.PAREN_R)},t.parseVariableDefinition=function(){var e=this._lexer.token;return{kind:tD.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(tF.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(tF.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(e)}},t.parseVariable=function(){var e=this._lexer.token;return this.expectToken(tF.DOLLAR),{kind:tD.VARIABLE,name:this.parseName(),loc:this.loc(e)}},t.parseSelectionSet=function(){var e=this._lexer.token;return{kind:tD.SELECTION_SET,selections:this.many(tF.BRACE_L,this.parseSelection,tF.BRACE_R),loc:this.loc(e)}},t.parseSelection=function(){return this.peek(tF.SPREAD)?this.parseFragment():this.parseField()},t.parseField=function(){var e,t,n=this._lexer.token,r=this.parseName();return this.expectOptionalToken(tF.COLON)?(e=r,t=this.parseName()):t=r,{kind:tD.FIELD,alias:e,name:t,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(tF.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(n)}},t.parseArguments=function(e){var t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(tF.PAREN_L,t,tF.PAREN_R)},t.parseArgument=function(){var e=this._lexer.token,t=this.parseName();return this.expectToken(tF.COLON),{kind:tD.ARGUMENT,name:t,value:this.parseValueLiteral(!1),loc:this.loc(e)}},t.parseConstArgument=function(){var e=this._lexer.token;return{kind:tD.ARGUMENT,name:this.parseName(),value:(this.expectToken(tF.COLON),this.parseValueLiteral(!0)),loc:this.loc(e)}},t.parseFragment=function(){var e=this._lexer.token;this.expectToken(tF.SPREAD);var t=this.expectOptionalKeyword("on");return!t&&this.peek(tF.NAME)?{kind:tD.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(e)}:{kind:tD.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}},t.parseFragmentDefinition=function(){var e,t=this._lexer.token;return(this.expectKeyword("fragment"),(null===(e=this._options)||void 0===e?void 0:e.experimentalFragmentVariables)===!0)?{kind:tD.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}:{kind:tD.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},t.parseFragmentName=function(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()},t.parseValueLiteral=function(e){var t=this._lexer.token;switch(t.kind){case tF.BRACKET_L:return this.parseList(e);case tF.BRACE_L:return this.parseObject(e);case tF.INT:return this._lexer.advance(),{kind:tD.INT,value:t.value,loc:this.loc(t)};case tF.FLOAT:return this._lexer.advance(),{kind:tD.FLOAT,value:t.value,loc:this.loc(t)};case tF.STRING:case tF.BLOCK_STRING:return this.parseStringLiteral();case tF.NAME:switch(this._lexer.advance(),t.value){case"true":return{kind:tD.BOOLEAN,value:!0,loc:this.loc(t)};case"false":return{kind:tD.BOOLEAN,value:!1,loc:this.loc(t)};case"null":return{kind:tD.NULL,loc:this.loc(t)};default:return{kind:tD.ENUM,value:t.value,loc:this.loc(t)}}case tF.DOLLAR:if(!e)return this.parseVariable()}throw this.unexpected()},t.parseStringLiteral=function(){var e=this._lexer.token;return this._lexer.advance(),{kind:tD.STRING,value:e.value,block:e.kind===tF.BLOCK_STRING,loc:this.loc(e)}},t.parseList=function(e){var t=this,n=this._lexer.token;return{kind:tD.LIST,values:this.any(tF.BRACKET_L,function(){return t.parseValueLiteral(e)},tF.BRACKET_R),loc:this.loc(n)}},t.parseObject=function(e){var t=this,n=this._lexer.token;return{kind:tD.OBJECT,fields:this.any(tF.BRACE_L,function(){return t.parseObjectField(e)},tF.BRACE_R),loc:this.loc(n)}},t.parseObjectField=function(e){var t=this._lexer.token,n=this.parseName();return this.expectToken(tF.COLON),{kind:tD.OBJECT_FIELD,name:n,value:this.parseValueLiteral(e),loc:this.loc(t)}},t.parseDirectives=function(e){for(var t=[];this.peek(tF.AT);)t.push(this.parseDirective(e));return t},t.parseDirective=function(e){var t=this._lexer.token;return this.expectToken(tF.AT),{kind:tD.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e),loc:this.loc(t)}},t.parseTypeReference=function(){var e,t=this._lexer.token;return(this.expectOptionalToken(tF.BRACKET_L)?(e=this.parseTypeReference(),this.expectToken(tF.BRACKET_R),e={kind:tD.LIST_TYPE,type:e,loc:this.loc(t)}):e=this.parseNamedType(),this.expectOptionalToken(tF.BANG))?{kind:tD.NON_NULL_TYPE,type:e,loc:this.loc(t)}:e},t.parseNamedType=function(){var e=this._lexer.token;return{kind:tD.NAMED_TYPE,name:this.parseName(),loc:this.loc(e)}},t.parseTypeSystemDefinition=function(){var e=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(e.kind===tF.NAME)switch(e.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(e)},t.peekDescription=function(){return this.peek(tF.STRING)||this.peek(tF.BLOCK_STRING)},t.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},t.parseSchemaDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");var n=this.parseDirectives(!0),r=this.many(tF.BRACE_L,this.parseOperationTypeDefinition,tF.BRACE_R);return{kind:tD.SCHEMA_DEFINITION,description:t,directives:n,operationTypes:r,loc:this.loc(e)}},t.parseOperationTypeDefinition=function(){var e=this._lexer.token,t=this.parseOperationType();this.expectToken(tF.COLON);var n=this.parseNamedType();return{kind:tD.OPERATION_TYPE_DEFINITION,operation:t,type:n,loc:this.loc(e)}},t.parseScalarTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");var n=this.parseName(),r=this.parseDirectives(!0);return{kind:tD.SCALAR_TYPE_DEFINITION,description:t,name:n,directives:r,loc:this.loc(e)}},t.parseObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");var n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),o=this.parseFieldsDefinition();return{kind:tD.OBJECT_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:i,fields:o,loc:this.loc(e)}},t.parseImplementsInterfaces=function(){var e;if(!this.expectOptionalKeyword("implements"))return[];if((null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLImplementsInterfaces)===!0){var t=[];this.expectOptionalToken(tF.AMP);do t.push(this.parseNamedType());while(this.expectOptionalToken(tF.AMP)||this.peek(tF.NAME));return t}return this.delimitedMany(tF.AMP,this.parseNamedType)},t.parseFieldsDefinition=function(){var e;return(null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLEmptyFields)===!0&&this.peek(tF.BRACE_L)&&this._lexer.lookahead().kind===tF.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(tF.BRACE_L,this.parseFieldDefinition,tF.BRACE_R)},t.parseFieldDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),r=this.parseArgumentDefs();this.expectToken(tF.COLON);var i=this.parseTypeReference(),o=this.parseDirectives(!0);return{kind:tD.FIELD_DEFINITION,description:t,name:n,arguments:r,type:i,directives:o,loc:this.loc(e)}},t.parseArgumentDefs=function(){return this.optionalMany(tF.PAREN_L,this.parseInputValueDef,tF.PAREN_R)},t.parseInputValueDef=function(){var e,t=this._lexer.token,n=this.parseDescription(),r=this.parseName();this.expectToken(tF.COLON);var i=this.parseTypeReference();this.expectOptionalToken(tF.EQUALS)&&(e=this.parseValueLiteral(!0));var o=this.parseDirectives(!0);return{kind:tD.INPUT_VALUE_DEFINITION,description:n,name:r,type:i,defaultValue:e,directives:o,loc:this.loc(t)}},t.parseInterfaceTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");var n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),o=this.parseFieldsDefinition();return{kind:tD.INTERFACE_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:i,fields:o,loc:this.loc(e)}},t.parseUnionTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseUnionMemberTypes();return{kind:tD.UNION_TYPE_DEFINITION,description:t,name:n,directives:r,types:i,loc:this.loc(e)}},t.parseUnionMemberTypes=function(){return this.expectOptionalToken(tF.EQUALS)?this.delimitedMany(tF.PIPE,this.parseNamedType):[]},t.parseEnumTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseEnumValuesDefinition();return{kind:tD.ENUM_TYPE_DEFINITION,description:t,name:n,directives:r,values:i,loc:this.loc(e)}},t.parseEnumValuesDefinition=function(){return this.optionalMany(tF.BRACE_L,this.parseEnumValueDefinition,tF.BRACE_R)},t.parseEnumValueDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),r=this.parseDirectives(!0);return{kind:tD.ENUM_VALUE_DEFINITION,description:t,name:n,directives:r,loc:this.loc(e)}},t.parseInputObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseInputFieldsDefinition();return{kind:tD.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:n,directives:r,fields:i,loc:this.loc(e)}},t.parseInputFieldsDefinition=function(){return this.optionalMany(tF.BRACE_L,this.parseInputValueDef,tF.BRACE_R)},t.parseTypeSystemExtension=function(){var e=this._lexer.lookahead();if(e.kind===tF.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)},t.parseSchemaExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var t=this.parseDirectives(!0),n=this.optionalMany(tF.BRACE_L,this.parseOperationTypeDefinition,tF.BRACE_R);if(0===t.length&&0===n.length)throw this.unexpected();return{kind:tD.SCHEMA_EXTENSION,directives:t,operationTypes:n,loc:this.loc(e)}},t.parseScalarTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var t=this.parseName(),n=this.parseDirectives(!0);if(0===n.length)throw this.unexpected();return{kind:tD.SCALAR_TYPE_EXTENSION,name:t,directives:n,loc:this.loc(e)}},t.parseObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),i=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===i.length)throw this.unexpected();return{kind:tD.OBJECT_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:i,loc:this.loc(e)}},t.parseInterfaceTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),i=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===i.length)throw this.unexpected();return{kind:tD.INTERFACE_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:i,loc:this.loc(e)}},t.parseUnionTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseUnionMemberTypes();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:tD.UNION_TYPE_EXTENSION,name:t,directives:n,types:r,loc:this.loc(e)}},t.parseEnumTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseEnumValuesDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:tD.ENUM_TYPE_EXTENSION,name:t,directives:n,values:r,loc:this.loc(e)}},t.parseInputObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseInputFieldsDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:tD.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:n,fields:r,loc:this.loc(e)}},t.parseDirectiveDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(tF.AT);var n=this.parseName(),r=this.parseArgumentDefs(),i=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var o=this.parseDirectiveLocations();return{kind:tD.DIRECTIVE_DEFINITION,description:t,name:n,arguments:r,repeatable:i,locations:o,loc:this.loc(e)}},t.parseDirectiveLocations=function(){return this.delimitedMany(tF.PIPE,this.parseDirectiveLocation)},t.parseDirectiveLocation=function(){var e=this._lexer.token,t=this.parseName();if(void 0!==tG[t.value])return t;throw this.unexpected(e)},t.loc=function(e){var t;if((null===(t=this._options)||void 0===t?void 0:t.noLocation)!==!0)return new tL(e,this._lexer.lastToken,this._lexer.source)},t.peek=function(e){return this._lexer.token.kind===e},t.expectToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t;throw tC(this._lexer.source,t.start,"Expected ".concat(tJ(e),", found ").concat(tH(t),"."))},t.expectOptionalToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t},t.expectKeyword=function(e){var t=this._lexer.token;if(t.kind===tF.NAME&&t.value===e)this._lexer.advance();else throw tC(this._lexer.source,t.start,'Expected "'.concat(e,'", found ').concat(tH(t),"."))},t.expectOptionalKeyword=function(e){var t=this._lexer.token;return t.kind===tF.NAME&&t.value===e&&(this._lexer.advance(),!0)},t.unexpected=function(e){var t=null!=e?e:this._lexer.token;return tC(this._lexer.source,t.start,"Unexpected ".concat(tH(t),"."))},t.any=function(e,t,n){this.expectToken(e);for(var r=[];!this.expectOptionalToken(n);)r.push(t.call(this));return r},t.optionalMany=function(e,t,n){if(this.expectOptionalToken(e)){var r=[];do r.push(t.call(this));while(!this.expectOptionalToken(n));return r}return[]},t.many=function(e,t,n){this.expectToken(e);var r=[];do r.push(t.call(this));while(!this.expectOptionalToken(n));return r},t.delimitedMany=function(e,t){this.expectOptionalToken(e);var n=[];do n.push(t.call(this));while(this.expectOptionalToken(e));return n},e}();function tH(e){var t=e.value;return tJ(e.kind)+(null!=t?' "'.concat(t,'"'):"")}function tJ(e){return e===tF.BANG||e===tF.DOLLAR||e===tF.AMP||e===tF.PAREN_L||e===tF.PAREN_R||e===tF.SPREAD||e===tF.COLON||e===tF.EQUALS||e===tF.AT||e===tF.BRACKET_L||e===tF.BRACKET_R||e===tF.BRACE_L||e===tF.PIPE||e===tF.BRACE_R?'"'.concat(e,'"'):e}var tX={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},tZ=Object.freeze({});function t0(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tX,r=void 0,i=Array.isArray(e),o=[e],a=-1,s=[],c=void 0,u=void 0,l=void 0,p=[],d=[],f=e;do{var h,m=++a===o.length,y=m&&0!==s.length;if(m){if(u=0===d.length?void 0:p[p.length-1],c=l,l=d.pop(),y){if(i)c=c.slice();else{for(var v={},E=0,b=Object.keys(c);E<b.length;E++){var T=b[E];v[T]=c[T]}c=v}for(var g=0,N=0;N<s.length;N++){var S=s[N][0],O=s[N][1];i&&(S-=g),i&&null===O?(c.splice(S,1),g++):c[S]=O}}a=r.index,o=r.keys,s=r.edits,i=r.inArray,r=r.prev}else{if(u=l?i?a:o[a]:void 0,null==(c=l?l[u]:f))continue;l&&p.push(u)}var A=void 0;if(!Array.isArray(c)){if(!tP(c))throw Error("Invalid AST Node: ".concat(tU(c,[]),"."));var I=function(e,t,n){var r=e[t];if(r){if(!n&&"function"==typeof r)return r;var i=n?r.leave:r.enter;if("function"==typeof i)return i}else{var o=n?e.leave:e.enter;if(o){if("function"==typeof o)return o;var a=o[t];if("function"==typeof a)return a}}}(t,c.kind,m);if(I){if((A=I.call(t,c,u,l,p,d))===tZ)break;if(!1===A){if(!m){p.pop();continue}}else if(void 0!==A&&(s.push([u,A]),!m)){if(tP(A))c=A;else{p.pop();continue}}}}void 0===A&&y&&s.push([u,c]),m?p.pop():(r={inArray:i,index:a,keys:o,edits:s,prev:r},o=(i=Array.isArray(c))?c:null!==(h=n[c.kind])&&void 0!==h?h:[],a=-1,s=[],l&&d.push(l),l=c)}while(void 0!==r);return 0!==s.length&&(f=s[s.length-1][1]),f}(e,{leave:t1})}var t1={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return t3(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=t5("(",t3(e.variableDefinitions,", "),")"),i=t3(e.directives," "),o=e.selectionSet;return n||i||r||"query"!==t?t3([t,t3([n,r]),i,o]," "):o},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,i=e.directives;return t+": "+n+t5(" = ",r)+t5(" ",t3(i," "))},SelectionSet:function(e){return t4(e.selections)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,i=e.directives,o=e.selectionSet,a=t5("",t,": ")+n,s=a+t5("(",t3(r,", "),")");return s.length>80&&(s=a+t5("(\n",t6(t3(r,"\n")),"\n)")),t3([s,t3(i," "),o]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+t5(" ",t3(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,r=e.selectionSet;return t3(["...",t5("on ",t),t3(n," "),r]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,i=e.directives,o=e.selectionSet;return"fragment ".concat(t).concat(t5("(",t3(r,", "),")")," ")+"on ".concat(n," ").concat(t5("",t3(i," ")," "))+o},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n=e.value;return e.block?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=-1===e.indexOf("\n"),i=" "===e[0]||"	"===e[0],o='"'===e[e.length-1],a="\\"===e[e.length-1],s=!r||o||a||n,c="";return s&&!(r&&i)&&(c+="\n"+t),c+=t?e.replace(/\n/g,"\n"+t):e,s&&(c+="\n"),'"""'+c.replace(/"""/g,'\\"""')+'"""'}(n,"description"===t?"":"  "):JSON.stringify(n)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+t3(e.values,", ")+"]"},ObjectValue:function(e){return"{"+t3(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+t5("(",t3(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:t2(function(e){var t=e.directives,n=e.operationTypes;return t3(["schema",t3(t," "),t4(n)]," ")}),OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:t2(function(e){return t3(["scalar",e.name,t3(e.directives," ")]," ")}),ObjectTypeDefinition:t2(function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return t3(["type",t,t5("implements ",t3(n," & ")),t3(r," "),t4(i)]," ")}),FieldDefinition:t2(function(e){var t=e.name,n=e.arguments,r=e.type,i=e.directives;return t+(t8(n)?t5("(\n",t6(t3(n,"\n")),"\n)"):t5("(",t3(n,", "),")"))+": "+r+t5(" ",t3(i," "))}),InputValueDefinition:t2(function(e){var t=e.name,n=e.type,r=e.defaultValue,i=e.directives;return t3([t+": "+n,t5("= ",r),t3(i," ")]," ")}),InterfaceTypeDefinition:t2(function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return t3(["interface",t,t5("implements ",t3(n," & ")),t3(r," "),t4(i)]," ")}),UnionTypeDefinition:t2(function(e){var t=e.name,n=e.directives,r=e.types;return t3(["union",t,t3(n," "),r&&0!==r.length?"= "+t3(r," | "):""]," ")}),EnumTypeDefinition:t2(function(e){var t=e.name,n=e.directives,r=e.values;return t3(["enum",t,t3(n," "),t4(r)]," ")}),EnumValueDefinition:t2(function(e){return t3([e.name,t3(e.directives," ")]," ")}),InputObjectTypeDefinition:t2(function(e){var t=e.name,n=e.directives,r=e.fields;return t3(["input",t,t3(n," "),t4(r)]," ")}),DirectiveDefinition:t2(function(e){var t=e.name,n=e.arguments,r=e.repeatable,i=e.locations;return"directive @"+t+(t8(n)?t5("(\n",t6(t3(n,"\n")),"\n)"):t5("(",t3(n,", "),")"))+(r?" repeatable":"")+" on "+t3(i," | ")}),SchemaExtension:function(e){var t=e.directives,n=e.operationTypes;return t3(["extend schema",t3(t," "),t4(n)]," ")},ScalarTypeExtension:function(e){return t3(["extend scalar",e.name,t3(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return t3(["extend type",t,t5("implements ",t3(n," & ")),t3(r," "),t4(i)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return t3(["extend interface",t,t5("implements ",t3(n," & ")),t3(r," "),t4(i)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,r=e.types;return t3(["extend union",t,t3(n," "),r&&0!==r.length?"= "+t3(r," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,r=e.values;return t3(["extend enum",t,t3(n," "),t4(r)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return t3(["extend input",t,t3(n," "),t4(r)]," ")}};function t2(e){return function(t){return t3([t.description,e(t)],"\n")}}function t3(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!==(t=null==e?void 0:e.filter(function(e){return e}).join(n))&&void 0!==t?t:""}function t4(e){return t5("{\n",t6(t3(e,"\n")),"\n}")}function t5(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return null!=t&&""!==t?e+t+n:""}function t6(e){return t5("  ",e.replace(/\n/g,"\n  "))}function t9(e){return -1!==e.indexOf("\n")}function t8(e){return null!=e&&e.some(t9)}var t7="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function ne(e){if(e instanceof tt)return e;if(null!=e){if(I(e[te]))return new tt(function(t){var n=e[te]();if(I(n.subscribe))return n.subscribe(t);throw TypeError("Provided object does not correctly implement Symbol.observable")});if(e&&"number"==typeof e.length&&"function"!=typeof e)return new tt(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()});if(I(null==e?void 0:e.then))return new tt(function(t){e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,P)});if(Symbol.asyncIterator&&I(null==e?void 0:e[Symbol.asyncIterator]))return nt(e);if(I(null==e?void 0:e[t7]))return new tt(function(t){var n,r;try{for(var i=(0,k.XA)(e),o=i.next();!o.done;o=i.next()){var a=o.value;if(t.next(a),t.closed)return}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()});if(I(null==e?void 0:e.getReader))return nt(function(e){return(0,k.FC)(this,arguments,function(){var t,n,r;return(0,k.Jh)(this,function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,(0,k.qq)(t.read())];case 3:if(r=(n=i.sent()).value,!n.done)return[3,5];return[4,(0,k.qq)(void 0)];case 4:return[2,i.sent()];case 5:return[4,(0,k.qq)(r)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}(e))}throw TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function nt(e){return new tt(function(t){(function(e,t){var n,r,i,o;return(0,k.mG)(this,void 0,void 0,function(){var a;return(0,k.Jh)(this,function(s){switch(s.label){case 0:s.trys.push([0,5,6,11]),n=(0,k.KL)(e),s.label=1;case 1:return[4,n.next()];case 2:if((r=s.sent()).done)return[3,4];if(a=r.value,t.next(a),t.closed)return[2];s.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return i={error:s.sent()},[3,11];case 6:if(s.trys.push([6,,9,10]),!(r&&!r.done&&(o=n.return)))return[3,8];return[4,o.call(n)];case 7:s.sent(),s.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})})(e,t).catch(function(e){return t.error(e)})})}var nn=n(9514),nr=n(5548),ni=n(5638);class no extends ni._{get response(){return this._response?na(this._response):void 0}constructor(e){super(e),this.constructor=no,Object.setPrototypeOf(this,no.prototype),e.response&&(this._response=e.response)}}let na=e=>({...e,headers:{...e.headers}});class ns extends no{constructor(e){super(e),this.constructor=ns,Object.setPrototypeOf(this,ns.prototype)}}class nc extends ns{constructor(e={}){super({name:"CanceledError",message:"Request is canceled by user",...e}),this.constructor=nc,Object.setPrototypeOf(this,nc.prototype)}}let nu=e=>!!e&&e instanceof nc;(v||(v={})).InvalidApiName="InvalidApiName",v.InvalidApiName;var nl=n(9015);let np=async e=>{if(!e)return;let t=await (0,nl.f)(nd(e));if(t){let n=await e.body?.text();return nf(t,{statusCode:e.statusCode,headers:e.headers,body:n})}},nd=e=>{let t;let n=new Proxy(e.body,{get:(e,n,r)=>"json"===n?async()=>{t||(t=e.text());try{return JSON.parse(await t)}catch(e){return{}}}:"text"===n?async()=>(t||(t=e.text()),t):Reflect.get(e,n,r)});return new Proxy(e,{get:(e,t,r)=>"body"===t?n:Reflect.get(e,t,r)})},nf=(e,t)=>Object.assign(new ns({name:e?.name,message:e.message,underlyingError:e,response:t}),{$metadata:e.$metadata});var nh=n(3110);let nm=new nh.k("RestApis");var ny=n(2221),nv=n(5902),nE=n(3911);let nb=e=>Object.keys(e).map(e=>e.toLowerCase()).sort().join(";"),nT="aws4_request",ng="AWS4-HMAC-SHA256",nN=(e,t,n)=>`${e}/${t}/${n}/${nT}`,nS=e=>{let t=e.toISOString().replace(/[:-]|\.\d{3}/g,"");return{longDate:t,shortDate:t.slice(0,8)}},nO=({credentials:e,signingDate:t=new Date,signingRegion:n,signingService:r,uriEscapePath:i=!0})=>{let{accessKeyId:o,secretAccessKey:a,sessionToken:s}=e,{longDate:c,shortDate:u}=nS(t);return{accessKeyId:o,credentialScope:nN(u,n,r),longDate:c,secretAccessKey:a,sessionToken:s,shortDate:u,signingRegion:n,signingService:r,uriEscapePath:i}};var nA=n(9515),nI=n(3663);let n_=(e,t)=>{let n=new nA.f(e??void 0);return n.update(t),n.digestSync()},nk=(e,t)=>{let n=n_(e,t);return(0,nI.N)(n)},nw=e=>Object.entries(e).map(([e,t])=>({key:e.toLowerCase(),value:t?.trim().replace(/\s+/g," ")??""})).sort((e,t)=>e.key<t.key?-1:1).map(e=>`${e.key}:${e.value}
`).join(""),nC=e=>Array.from(e).sort(([e,t],[n,r])=>e===n?t<r?-1:1:e<n?-1:1).map(([e,t])=>`${nD(e)}=${nD(t)}`).join("&"),nD=e=>encodeURIComponent(e).replace(/[!'()*]/g,nx),nx=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,nR=(e,t=!0)=>e?t?encodeURIComponent(e).replace(/%2F/g,"/"):e:"/",nL=e=>null==e?"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855":nM(e)?nk(null,e):"UNSIGNED-PAYLOAD",nM=e=>"string"==typeof e||ArrayBuffer.isView(e)||nP(e),nP=e=>"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e),nF=({body:e,headers:t,method:n,url:r},i=!0)=>[n,nR(r.pathname,i),nC(r.searchParams),nw(t),nb(t),nL(e)].join("\n"),nj=(e,t,n,r)=>{let i=n_(`AWS4${e}`,t),o=n_(i,n),a=n_(o,r);return n_(a,nT)},nU=(e,t,n)=>[ng,e,t,n].join("\n"),n$=(e,{credentialScope:t,longDate:n,secretAccessKey:r,shortDate:i,signingRegion:o,signingService:a,uriEscapePath:s})=>{let c=nU(n,t,nk(null,nF(e,s)));return nk(nj(r,i,o,a),c)},nB=(e,t)=>{let n=nO(t),{accessKeyId:r,credentialScope:i,longDate:o,sessionToken:a}=n,s={...e.headers};s.host=e.url.host,s["x-amz-date"]=o,a&&(s["x-amz-security-token"]=a);let c={...e,headers:s},u=n$(c,n),l=`Credential=${r}/${i}`,p=`SignedHeaders=${nb(s)}`,d=`Signature=${u}`;return s.authorization=`${ng} ${l}, ${p}, ${d}`,c},nG=e=>new Date(Date.now()+e),nK=(e,t)=>Math.abs(nG(t).getTime()-e)>=3e5,nV=(e,t)=>nK(e,t)?e-Date.now():t,nq=({headers:e}={})=>e?.date??e?.Date??e?.["x-amz-date"];var nQ=n(4516),nz=n(8146),nW=n(8799);let nY=(0,nz.V)(nW.S,[nQ.n,nE.d,({credentials:e,region:t,service:n,uriEscapePath:r=!0})=>{let i;return o=>async function(a){i=i??0;let s={credentials:"function"==typeof e?await e():e,signingDate:nG(i),signingRegion:t,signingService:n,uriEscapePath:r},c=await nB(a,s),u=await o(c),l=nq(u);return l&&(i=nV(Date.parse(l),i)),u}}]);var nH=n(1523);let nJ="execute-api",nX=/^.+\.([a-z0-9-]+)\.([a-z0-9-]+)\.amazonaws\.com/,nZ=(e,t)=>{let{service:n=nJ,region:r="us-east-1"}=t?.amplify.getConfig()?.API?.REST?.[t?.apiName]??{},{hostname:i}=e,[,o,a]=nX.exec(i)??[];return o===nJ?{service:o,region:a??r}:"appsync-api"===o?{service:"appsync",region:a??r}:{service:n,region:r}},n0=(e,t)=>{let n={};for(let t in e)n[t.toLowerCase()]=e[t];return t&&(n["content-type"]="application/json; charset=UTF-8",t instanceof FormData&&delete n["content-type"]),n},n1=async(e,t,n,r)=>{let i;let{url:o,method:a,headers:s,body:c,withCredentials:u,abortSignal:l}=t,p=c?c instanceof FormData?c:JSON.stringify(c??""):void 0,d={url:o,headers:n0(s,c),method:a,body:p},f={retryDecider:(0,ny.j)(np),computeDelay:nv.k,withCrossDomainCredentials:u,abortSignal:l},h=n(d,r),m=await n2(e);if(h&&m){let e=nZ(o),t=r?.service??e.service,n=r?.region??e.region;i=await nY(d,{...f,credentials:m,region:n,service:t})}else i=await (0,nH.y)(d,{...f});return{statusCode:i.statusCode,headers:i.headers,body:i.body}},n2=async e=>{try{let{credentials:t}=await e.Auth.fetchAuthSession();if(t)return t}catch(e){nm.debug("No credentials available, the request will be unsigned.")}return null},n3=({headers:e},t)=>!e.authorization&&!e["x-api-key"]&&!!t,n4=new WeakMap,n5=(e,{url:t,options:n,abortController:r})=>{let i=r??new AbortController,o=(function(e,t){let n;let r=e=>!!t,i=new AbortController,o=i.signal,a=t?.signal,s=async()=>{try{let t=await (r(e)?e():e(o));if(t.statusCode>=300)throw await np(t);return t}catch(r){let e=a??o,t=n??e.reason;if("AbortError"===r.name||e?.aborted===!0){let e=new nc({...t&&{message:t},underlyingError:r,recoverySuggestion:"The API request was explicitly canceled. If this is not intended, validate if you called the `cancel()` function on the API request erroneously."});throw nm.debug(r),e}throw nm.debug(r),r}};return r()?s():{response:s(),cancel:e=>{!0!==o.aborted&&(i.abort(e),e&&o.reason!==e&&(n=e))}}})(async()=>n1(e,{url:t,method:"POST",...n,abortSignal:i.signal},n3,n?.signingServiceInfo),i).finally(()=>{n4.delete(o)});return o},n6=(e,t)=>{let n=n4.get(e);return!!n&&(n.abort(t),t&&n.signal.reason!==t&&(n.signal.reason=t),!0)},n9=(e,t)=>{n4.set(e,t)};var n8=n(389),n7={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let re=new Uint8Array(16),rt=[];for(let e=0;e<256;++e)rt.push((e+256).toString(16).slice(1));let rn=function(e,t,n){if(n7.randomUUID&&!t&&!e)return n7.randomUUID();let i=(e=e||{}).random||(e.rng||function(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(re)})();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=i[e];return t}return function(e,t=0){return rt[e[t+0]]+rt[e[t+1]]+rt[e[t+2]]+rt[e[t+3]]+"-"+rt[e[t+4]]+rt[e[t+5]]+"-"+rt[e[t+6]]+rt[e[t+7]]+"-"+rt[e[t+8]]+rt[e[t+9]]+"-"+rt[e[t+10]]+rt[e[t+11]]+rt[e[t+12]]+rt[e[t+13]]+rt[e[t+14]]+rt[e[t+15]]}(i)};var rr=n(9059);let ri=e=>e&&e.nonRetryable;var ro=n(2614),ra=n(742),rs=n(9955);let rc=new nh.k("retryUtil");async function ru(e,t,n,r){if("function"!=typeof e)throw Error("functionToRetry must be a function");return new Promise(async(i,o)=>{let a,s,c=0,u=!1,l=()=>{};for(r&&r.then(()=>{u=!0,clearTimeout(a),l()});!u;){c++,rc.debug(`${e.name} attempt #${c} with this vars: ${JSON.stringify(t)}`);try{i(await e(...t));return}catch(i){if(s=i,rc.debug(`error on ${e.name}`,i),ri(i)){rc.debug(`${e.name} non retryable error`,i),o(i);return}let r=n(c,t,i);if(rc.debug(`${e.name} retrying in ${r} ms`),!1===r||u){o(i);return}await new Promise(e=>{a=setTimeout(l=e,r)})}}o(s)})}let rl=(e,t,n=ra.t,r)=>ru(e,t,(0,rs.k)(n),r);class rp extends Error{constructor(){super(...arguments),this.nonRetryable=!0}}(c=E||(E={})).CONNECTION_CLOSED="Connection closed",c.CONNECTION_FAILED="Connection failed",c.REALTIME_SUBSCRIPTION_INIT_ERROR="AppSync Realtime subscription init error",c.SUBSCRIPTION_ACK="Subscription ack",c.TIMEOUT_DISCONNECT="Timeout disconnect",(u=b||(b={})).Connected="Connected",u.ConnectedPendingNetwork="ConnectedPendingNetwork",u.ConnectionDisrupted="ConnectionDisrupted",u.ConnectionDisruptedPendingNetwork="ConnectionDisruptedPendingNetwork",u.Connecting="Connecting",u.ConnectedPendingDisconnect="ConnectedPendingDisconnect",u.Disconnected="Disconnected",u.ConnectedPendingKeepAlive="ConnectedPendingKeepAlive";let rd=[400,401,403];(l=T||(T={})).GQL_CONNECTION_INIT="connection_init",l.GQL_CONNECTION_ERROR="connection_error",l.GQL_CONNECTION_ACK="connection_ack",l.GQL_START="start",l.GQL_START_ACK="start_ack",l.GQL_DATA="data",l.GQL_CONNECTION_KEEP_ALIVE="ka",l.GQL_STOP="stop",l.GQL_COMPLETE="complete",l.GQL_ERROR="error",(p=g||(g={}))[p.PENDING=0]="PENDING",p[p.CONNECTED=1]="CONNECTED",p[p.FAILED=2]="FAILED",(d=N||(N={}))[d.CLOSED=0]="CLOSED",d[d.READY=1]="READY",d[d.CONNECTING=2]="CONNECTING";let rf={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"},rh=()=>{if("undefined"==typeof self)return!1;let e=self;return void 0!==e.WorkerGlobalScope&&self instanceof e.WorkerGlobalScope};class rm{networkMonitor(e){let t=rh()?self:"undefined"!=typeof window&&window;return t?new tt(e=>{e.next({online:t.navigator.onLine});let n=()=>{e.next({online:!0})},r=()=>{e.next({online:!1})};return t.addEventListener("online",n),t.addEventListener("offline",r),rm._observers.push(e),()=>{t.removeEventListener("online",n),t.removeEventListener("offline",r),rm._observers=rm._observers.filter(t=>t!==e)}}):ne([{online:!0}])}static _observerOverride(e){for(let t of this._observers){if(t.closed){this._observers=this._observers.filter(e=>e!==t);continue}t?.next&&t.next(e)}}}rm._observers=[];let ry=()=>new rm().networkMonitor(),rv={KEEP_ALIVE_MISSED:{keepAliveState:"unhealthy"},KEEP_ALIVE:{keepAliveState:"healthy"},CONNECTION_ESTABLISHED:{connectionState:"connected"},CONNECTION_FAILED:{intendedConnectionState:"disconnected",connectionState:"disconnected"},CLOSING_CONNECTION:{intendedConnectionState:"disconnected"},OPENING_CONNECTION:{intendedConnectionState:"connected",connectionState:"connecting"},CLOSED:{connectionState:"disconnected"},ONLINE:{networkState:"connected"},OFFLINE:{networkState:"disconnected"}};class rE{constructor(){this._networkMonitoringSubscription=void 0,this._linkedConnectionState={networkState:"connected",connectionState:"disconnected",intendedConnectionState:"disconnected",keepAliveState:"healthy"},this._initialNetworkStateSubscription=ry().subscribe(({online:e})=>{this.record(e?rv.ONLINE:rv.OFFLINE),this._initialNetworkStateSubscription?.unsubscribe()}),this._linkedConnectionStateObservable=new tt(e=>{e.next(this._linkedConnectionState),this._linkedConnectionStateObserver=e})}enableNetworkMonitoring(){this._initialNetworkStateSubscription?.unsubscribe(),void 0===this._networkMonitoringSubscription&&(this._networkMonitoringSubscription=ry().subscribe(({online:e})=>{this.record(e?rv.ONLINE:rv.OFFLINE)}))}disableNetworkMonitoring(){this._networkMonitoringSubscription?.unsubscribe(),this._networkMonitoringSubscription=void 0}get connectionStateObservable(){var e;let t;return this._linkedConnectionStateObservable.pipe(J(e=>this.connectionStatesTranslator(e))).pipe((e=e=>{let n=e!==t;return t=e,n},_(function(t,n){var r,i,o,a=0;t.subscribe(new H(n,function(t){return e.call(void 0,t,a++)&&n.next(t)},void 0,void 0,void 0))})))}record(e){"connected"===e.intendedConnectionState?this.enableNetworkMonitoring():"disconnected"===e.intendedConnectionState&&this.disableNetworkMonitoring();let t={...this._linkedConnectionState,...e};this._linkedConnectionState={...t},this._linkedConnectionStateObserver?.next(this._linkedConnectionState)}connectionStatesTranslator({connectionState:e,networkState:t,intendedConnectionState:n,keepAliveState:r}){return"connected"===e&&"disconnected"===t?b.ConnectedPendingNetwork:"connected"===e&&"disconnected"===n?b.ConnectedPendingDisconnect:"disconnected"===e&&"connected"===n&&"disconnected"===t?b.ConnectionDisruptedPendingNetwork:"disconnected"===e&&"connected"===n?b.ConnectionDisrupted:"connected"===e&&"unhealthy"===r?b.ConnectedPendingKeepAlive:"connecting"===e?b.Connecting:"disconnected"===e?b.Disconnected:b.Connected}}(f=S||(S={})).START_RECONNECT="START_RECONNECT",f.HALT_RECONNECT="HALT_RECONNECT";class rb{constructor(){this.reconnectObservers=[]}addObserver(e){this.reconnectObservers.push(e)}record(e){e===S.START_RECONNECT&&void 0===this.reconnectSetTimeoutId&&void 0===this.reconnectIntervalId&&(this.reconnectSetTimeoutId=setTimeout(()=>{this._triggerReconnect(),this.reconnectIntervalId=setInterval(()=>{this._triggerReconnect()},6e4)},5e3)),e===S.HALT_RECONNECT&&(this.reconnectIntervalId&&(clearInterval(this.reconnectIntervalId),this.reconnectIntervalId=void 0),this.reconnectSetTimeoutId&&(clearTimeout(this.reconnectSetTimeoutId),this.reconnectSetTimeoutId=void 0))}close(){this.reconnectObservers.forEach(e=>{e.complete?.()})}_triggerReconnect(){this.reconnectObservers.forEach(e=>{e.next?.()})}}let rT=new nh.k("AWSAppSyncRealTimeProvider"),rg=e=>{A.Xb.dispatch("api",e,"PubSub",A.SQ)},rN=/^https:\/\/\w{26}\.appsync-api\.\w{2}(?:(?:-\w{2,})+)-\d\.amazonaws.com(?:\.cn)?\/graphql$/i;class rS{constructor(){this.socketStatus=N.CLOSED,this.keepAliveTimeout=3e5,this.subscriptionObserverMap=new Map,this.promiseArray=[],this.connectionStateMonitor=new rE,this.reconnectionMonitor=new rb,this.connectionStateMonitorSubscription=this.connectionStateMonitor.connectionStateObservable.subscribe(e=>{rg({event:"ConnectionStateChange",data:{provider:this,connectionState:e},message:`Connection state is ${e}`}),this.connectionState=e,e===b.ConnectionDisrupted&&this.reconnectionMonitor.record(S.START_RECONNECT),[b.Connected,b.ConnectedPendingDisconnect,b.ConnectedPendingKeepAlive,b.ConnectedPendingNetwork,b.ConnectionDisruptedPendingNetwork,b.Disconnected].includes(e)&&this.reconnectionMonitor.record(S.HALT_RECONNECT)})}close(){this.socketStatus=N.CLOSED,this.connectionStateMonitor.record(rv.CONNECTION_FAILED),this.connectionStateMonitorSubscription.unsubscribe(),this.reconnectionMonitor.close()}getNewWebSocket(e,t){return new WebSocket(e,t)}getProviderName(){return"AWSAppSyncRealTimeProvider"}isCustomDomain(e){return null===e.match(rN)}subscribe(e,t){let{appSyncGraphqlEndpoint:n,region:r,query:i,variables:o,authenticationType:a,additionalHeaders:s,apiKey:c,authToken:u,libraryConfigHeaders:l}=e||{};return new tt(p=>{if(e&&n){let e=!1,d=rn(),f=()=>{e||(e=!0,this._startSubscriptionWithAWSAppSyncRealTime({options:{query:i,variables:o,region:r,authenticationType:a,appSyncGraphqlEndpoint:n,additionalHeaders:s,apiKey:c,authToken:u,libraryConfigHeaders:l},observer:p,subscriptionId:d,customUserAgentDetails:t}).catch(e=>{rT.debug(`${E.REALTIME_SUBSCRIPTION_INIT_ERROR}: ${e}`),this.connectionStateMonitor.record(rv.CLOSED)}).finally(()=>{e=!1}))},h=new tt(e=>{this.reconnectionMonitor.addObserver(e)}).subscribe(()=>{f()});return f(),async()=>{h?.unsubscribe();try{await this._waitForSubscriptionToBeConnected(d);let{subscriptionState:e}=this.subscriptionObserverMap.get(d)||{};if(!e)return;if(e===g.CONNECTED)this._sendUnsubscriptionMessage(d);else throw Error("Subscription never connected")}catch(e){rT.debug(`Error while unsubscribing ${e}`)}finally{this._removeSubscriptionObserver(d)}}}p.error({errors:[{...new tk("Subscribe only available for AWS AppSync endpoint")}]}),p.complete()})}async _startSubscriptionWithAWSAppSyncRealTime({options:e,observer:t,subscriptionId:n,customUserAgentDetails:r}){let{appSyncGraphqlEndpoint:i,authenticationType:o,query:a,variables:s,apiKey:c,region:u,libraryConfigHeaders:l=()=>({}),additionalHeaders:p={},authToken:d}=e,f={};f="function"==typeof p?await p({url:i||"",queryString:a||""}):p,d&&(f={...f,Authorization:d});let h=g.PENDING;this.subscriptionObserverMap.set(n,{observer:t,query:a??"",variables:s??{},subscriptionState:h,startAckTimeoutId:void 0});let m=JSON.stringify({query:a,variables:s}),y={...await this._awsRealTimeHeaderBasedAuth({apiKey:c,appSyncGraphqlEndpoint:i,authenticationType:o,payload:m,canonicalUri:"",region:u,additionalCustomHeaders:f}),...await l(),...f,[rr.Mt]:(0,nr.Zm)(r)},v=JSON.stringify({id:n,payload:{data:m,extensions:{authorization:{...y}}},type:T.GQL_START});try{this.connectionStateMonitor.record(rv.OPENING_CONNECTION),await this._initializeWebSocketConnection({apiKey:c,appSyncGraphqlEndpoint:i,authenticationType:o,region:u,additionalCustomHeaders:f})}catch(e){this._logStartSubscriptionError(n,t,e);return}let{subscriptionFailedCallback:E,subscriptionReadyCallback:b}=this.subscriptionObserverMap.get(n)??{};this.subscriptionObserverMap.set(n,{observer:t,subscriptionState:h,query:a??"",variables:s??{},subscriptionReadyCallback:b,subscriptionFailedCallback:E,startAckTimeoutId:setTimeout(()=>{this._timeoutStartSubscriptionAck(n)},15e3)}),this.awsRealTimeSocket&&this.awsRealTimeSocket.send(v)}_logStartSubscriptionError(e,t,n){rT.debug({err:n});let r=String(n.message??"");if(this.connectionStateMonitor.record(rv.CLOSED),this.connectionState!==b.ConnectionDisruptedPendingNetwork){ri(n)?t.error({errors:[{...new tk(`${E.CONNECTION_FAILED}: ${r}`)}]}):rT.debug(`${E.CONNECTION_FAILED}: ${r}`);let{subscriptionFailedCallback:i}=this.subscriptionObserverMap.get(e)||{};"function"==typeof i&&i()}}async _waitForSubscriptionToBeConnected(e){let t=this.subscriptionObserverMap.get(e);if(t){let{subscriptionState:n}=t;if(n===g.PENDING)return new Promise((n,r)=>{let{observer:i,subscriptionState:o,variables:a,query:s}=t;this.subscriptionObserverMap.set(e,{observer:i,subscriptionState:o,variables:a,query:s,subscriptionReadyCallback:n,subscriptionFailedCallback:r})})}}_sendUnsubscriptionMessage(e){try{if(this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===N.READY){let t={id:e,type:T.GQL_STOP},n=JSON.stringify(t);this.awsRealTimeSocket.send(n)}}catch(e){rT.debug({err:e})}}_removeSubscriptionObserver(e){this.subscriptionObserverMap.delete(e),setTimeout(this._closeSocketIfRequired.bind(this),1e3)}_closeSocketIfRequired(){if(!(this.subscriptionObserverMap.size>0)){if(!this.awsRealTimeSocket){this.socketStatus=N.CLOSED;return}if(this.connectionStateMonitor.record(rv.CLOSING_CONNECTION),this.awsRealTimeSocket.bufferedAmount>0)setTimeout(this._closeSocketIfRequired.bind(this),1e3);else{rT.debug("closing WebSocket..."),this.keepAliveTimeoutId&&clearTimeout(this.keepAliveTimeoutId),this.keepAliveAlertTimeoutId&&clearTimeout(this.keepAliveAlertTimeoutId);let e=this.awsRealTimeSocket;e.onclose=null,e.onerror=null,e.close(1e3),this.awsRealTimeSocket=void 0,this.socketStatus=N.CLOSED,this.connectionStateMonitor.record(rv.CLOSED)}}}_handleIncomingSubscriptionMessage(e){if("string"!=typeof e.data)return;rT.debug(`subscription message from AWS AppSync RealTime: ${e.data}`);let{id:t="",payload:n,type:r}=JSON.parse(String(e.data)),{observer:i=null,query:o="",variables:a={},startAckTimeoutId:s,subscriptionReadyCallback:c,subscriptionFailedCallback:u}=this.subscriptionObserverMap.get(t)||{};if(rT.debug({id:t,observer:i,query:o,variables:a}),r===T.GQL_DATA&&n&&n.data){i?i.next(n):rT.debug(`observer not found for id: ${t}`);return}if(r===T.GQL_START_ACK){rT.debug(`subscription ready for ${JSON.stringify({query:o,variables:a})}`),"function"==typeof c&&c(),s&&clearTimeout(s),rg({event:E.SUBSCRIPTION_ACK,data:{query:o,variables:a},message:"Connection established for subscription"});let e=g.CONNECTED;i&&this.subscriptionObserverMap.set(t,{observer:i,query:o,variables:a,startAckTimeoutId:void 0,subscriptionState:e,subscriptionReadyCallback:c,subscriptionFailedCallback:u}),this.connectionStateMonitor.record(rv.CONNECTION_ESTABLISHED);return}if(r===T.GQL_CONNECTION_KEEP_ALIVE){this.keepAliveTimeoutId&&clearTimeout(this.keepAliveTimeoutId),this.keepAliveAlertTimeoutId&&clearTimeout(this.keepAliveAlertTimeoutId),this.keepAliveTimeoutId=setTimeout(()=>{this._errorDisconnect(E.TIMEOUT_DISCONNECT)},this.keepAliveTimeout),this.keepAliveAlertTimeoutId=setTimeout(()=>{this.connectionStateMonitor.record(rv.KEEP_ALIVE_MISSED)},65e3),this.connectionStateMonitor.record(rv.KEEP_ALIVE);return}if(r===T.GQL_ERROR){let e=g.FAILED;i&&(this.subscriptionObserverMap.set(t,{observer:i,query:o,variables:a,startAckTimeoutId:s,subscriptionReadyCallback:c,subscriptionFailedCallback:u,subscriptionState:e}),rT.debug(`${E.CONNECTION_FAILED}: ${JSON.stringify(n)}`),i.error({errors:[{...new tk(`${E.CONNECTION_FAILED}: ${JSON.stringify(n)}`)}]}),s&&clearTimeout(s),"function"==typeof u&&u())}}_errorDisconnect(e){rT.debug(`Disconnect error: ${e}`),this.awsRealTimeSocket&&(this.connectionStateMonitor.record(rv.CLOSED),this.awsRealTimeSocket.close()),this.socketStatus=N.CLOSED}_timeoutStartSubscriptionAck(e){let t=this.subscriptionObserverMap.get(e);if(t){let{observer:n,query:r,variables:i}=t;if(!n)return;this.subscriptionObserverMap.set(e,{observer:n,query:r,variables:i,subscriptionState:g.FAILED}),this.connectionStateMonitor.record(rv.CLOSED),rT.debug("timeoutStartSubscription",JSON.stringify({query:r,variables:i}))}}_extractNonAuthHeaders(e){if(!e)return{};if("Authorization"in e){let{Authorization:t,...n}=e;return n}return e}_queryParamsFromCustomHeaders(e){let t=this._extractNonAuthHeaders(e),n=new nn.z;return Object.entries(t).forEach(([e,t])=>{n.append(e,t)}),n}_realtimeUrlWithQueryString(e,t){let n="wss://",r=e??"";r=(r=this.isCustomDomain(r)?r.concat("/realtime"):r.replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta")).replace("https://",n).replace("http://",n);let i=new nn.a(r),o=new nn.z(i.search);for(let[e,n]of t.entries())o.append(e,n);return i.search=o.toString(),i.toString()}_initializeWebSocketConnection({appSyncGraphqlEndpoint:e,authenticationType:t,apiKey:n,region:r,additionalCustomHeaders:i}){if(this.socketStatus!==N.READY)return new Promise(async(o,a)=>{if(this.promiseArray.push({res:o,rej:a}),this.socketStatus===N.CLOSED)try{this.socketStatus=N.CONNECTING;let o=await this._awsRealTimeHeaderBasedAuth({authenticationType:t,payload:"{}",canonicalUri:"/connect",apiKey:n,appSyncGraphqlEndpoint:e,region:r,additionalCustomHeaders:i}),a=o?JSON.stringify(o):"",s=ro.u.convert(a,{urlSafe:!0,skipPadding:!0}),c=`header-${s}`,u=this._queryParamsFromCustomHeaders(i),l=this._realtimeUrlWithQueryString(e,u);await this._initializeRetryableHandshake(l,c),this.promiseArray.forEach(({res:e})=>{rT.debug("Notifying connection successful"),e()}),this.socketStatus=N.READY,this.promiseArray=[]}catch(e){rT.debug("Connection exited with",e),this.promiseArray.forEach(({rej:t})=>{t(e)}),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=void 0,this.socketStatus=N.CLOSED}})}async _initializeRetryableHandshake(e,t){rT.debug("Initializaling retryable Handshake"),await rl(this._initializeHandshake.bind(this),[e,t],5e3)}async _initializeHandshake(e,t){rT.debug(`Initializing handshake ${e}`);try{await new Promise((n,r)=>{let i=this.getNewWebSocket(e,["graphql-ws",t]);i.onerror=()=>{rT.debug("WebSocket connection error")},i.onclose=()=>{r(Error("Connection handshake error"))},i.onopen=()=>{this.awsRealTimeSocket=i,n()}}),await new Promise((e,t)=>{if(this.awsRealTimeSocket){let n=!1;this.awsRealTimeSocket.onerror=e=>{rT.debug(`WebSocket error ${JSON.stringify(e)}`)},this.awsRealTimeSocket.onclose=e=>{rT.debug(`WebSocket closed ${e.reason}`),t(Error(JSON.stringify(e)))},this.awsRealTimeSocket.onmessage=r=>{if("string"!=typeof r.data)return;rT.debug(`subscription message from AWS AppSyncRealTime: ${r.data} `);let i=JSON.parse(r.data),{type:o,payload:{connectionTimeoutMs:a=3e5}={}}=i;if(o===T.GQL_CONNECTION_ACK){n=!0,this.awsRealTimeSocket&&(this.keepAliveTimeout=a,this.awsRealTimeSocket.onmessage=this._handleIncomingSubscriptionMessage.bind(this),this.awsRealTimeSocket.onerror=e=>{rT.debug(e),this._errorDisconnect(E.CONNECTION_CLOSED)},this.awsRealTimeSocket.onclose=e=>{rT.debug(`WebSocket closed ${e.reason}`),this._errorDisconnect(E.CONNECTION_CLOSED)}),e("Cool, connected to AWS AppSyncRealTime");return}if(o===T.GQL_CONNECTION_ERROR){let{payload:{errors:[{errorType:e="",errorCode:n=0}={}]=[]}={}}=i;t({errorType:e,errorCode:n})}};let r={type:T.GQL_CONNECTION_INIT};this.awsRealTimeSocket.send(JSON.stringify(r));let i=e=>{e||(this.connectionStateMonitor.record(rv.CONNECTION_FAILED),t(Error("Connection timeout: ack from AWSAppSyncRealTime was not received after 15000 ms")))};setTimeout(()=>{i(n)},15e3)}})}catch(n){let{errorType:e,errorCode:t}=n;if(rd.includes(t))throw new rp(e);if(e)throw Error(e);throw n}}async _awsRealTimeHeaderBasedAuth({apiKey:e,authenticationType:t,payload:n,canonicalUri:r,appSyncGraphqlEndpoint:i,region:o,additionalCustomHeaders:a}){let s={apiKey:this._awsRealTimeApiKeyHeader.bind(this),iam:this._awsRealTimeIAMHeader.bind(this),oidc:this._awsAuthTokenHeader.bind(this),userPool:this._awsAuthTokenHeader.bind(this),lambda:this._customAuthHeader,none:this._customAuthHeader};if(t&&s[t]){let c;let u=s[t],l=i?new nn.a(i).host:void 0;return rT.debug(`Authenticating with ${JSON.stringify(t)}`),"apiKey"===t&&(c=e),await u({payload:n,canonicalUri:r,appSyncGraphqlEndpoint:i,apiKey:c,region:o,host:l,additionalCustomHeaders:a})}rT.debug(`Authentication type ${t} not supported`)}async _awsAuthTokenHeader({host:e}){let t=await (0,n8.y)();return{Authorization:t?.tokens?.accessToken?.toString(),host:e}}async _awsRealTimeApiKeyHeader({apiKey:e,host:t}){return{host:t,"x-amz-date":new Date().toISOString().replace(/[:-]|\.\d{3}/g,""),"x-api-key":e}}async _awsRealTimeIAMHeader({payload:e,canonicalUri:t,appSyncGraphqlEndpoint:n,region:r}){let i=(await (0,n8.y)()).credentials,o={url:`${n}${t}`,data:e,method:"POST",headers:{...rf}};return nB({headers:o.headers,method:o.method,url:new nn.a(o.url),body:o.data},{credentials:i,signingRegion:r,signingService:"appsync"}).headers}_customAuthHeader({host:e,additionalCustomHeaders:t}){if(!t?.Authorization)throw Error("No auth token specified");return{Authorization:t.Authorization,host:e}}}class rO extends ni._{constructor(e){super(e),this.constructor=rO,Object.setPrototypeOf(this,rO.prototype)}}(h=O||(O={})).NoAuthSession="NoAuthSession",h.NoRegion="NoRegion",h.NoCustomEndpoint="NoCustomEndpoint";let rA={[O.NoAuthSession]:{message:"Auth session should not be empty."},[O.NoRegion]:{message:"Missing region."},[O.NoCustomEndpoint]:{message:"Custom endpoint region is present without custom endpoint."}},rI=new nh.k("GraphQLAPI resolveConfig"),r_=e=>{let t=e.getConfig();t.API?.GraphQL||rI.warn("The API configuration is missing. This is likely due to Amplify.configure() not being called prior to generateClient().");let{apiKey:n,customEndpoint:r,customEndpointRegion:i,defaultAuthMode:o,endpoint:a,region:s}=t.API?.GraphQL??{};return!function(e,t){let{message:n,recoverySuggestion:r}=rA[t];if(!e)throw new rO({name:t,message:n,recoverySuggestion:r})}(!(!r&&i),O.NoCustomEndpoint),{apiKey:n,customEndpoint:r,customEndpointRegion:i,defaultAuthMode:o,endpoint:a,region:s}},rk=e=>({headers:e.libraryOptions?.API?.GraphQL?.headers,withCredentials:e.libraryOptions?.API?.GraphQL?.withCredentials});function rw(e){return e.errors&&Array.isArray(e.errors)&&e.errors.forEach(e=>{(e?.originalError?.name?.startsWith("UnauthorizedException")||e.message?.startsWith("Connection failed:")&&e.message?.includes("Permission denied"))&&(e.message="Unauthorized",e.recoverySuggestion="If you're calling an Amplify-generated API, make sure to set the \"authMode\" in generateClient({ authMode: '...' }) to the backend authorization rule's auth provider ('apiKey', 'userPool', 'iam', 'oidc', 'lambda')")}),e}let rC={name:"NoApiKey",message:y.NO_API_KEY,recoverySuggestion:'The API request was made with `authMode: "apiKey"` but no API Key was passed into `Amplify.configure()`. Review if your API key is passed into the `Amplify.configure()` function.'},rD={name:"NoCredentials",message:y.NO_CREDENTIALS,recoverySuggestion:`The API request was made with \`authMode: "iam"\` but no authentication credentials are available.

If you intended to make a request using an authenticated role, review if your user is signed in before making the request.

If you intend to make a request using an unauthenticated role or also known as "guest access", verify if "Auth.Cognito.allowGuestAccess" is set to "true" in the \`Amplify.configure()\` function.`},rx={name:"NoValidAuthTokens",message:y.NO_FEDERATED_JWT,recoverySuggestion:"If you intended to make an authenticated API request, review if the current user is signed in."},rR={name:"NoSignedUser",message:y.NO_CURRENT_USER,recoverySuggestion:"Review the underlying exception field for more details. If you intended to make an authenticated API request, review if the current user is signed in."},rL={name:"NoAuthorizationHeader",message:y.NO_AUTH_TOKEN,recoverySuggestion:'The API request was made with `authMode: "lambda"` but no `authToken` is set. Review if a valid authToken is passed into the request options or in the `Amplify.configure()` function.'},rM={name:"NoEndpoint",message:"No GraphQL endpoint configured in `Amplify.configure()`.",recoverySuggestion:"Review if the GraphQL API endpoint is set in the `Amplify.configure()` function."},rP=e=>({data:{},errors:[new tk(e.message,null,null,null,null,e)]}),rF=e=>"function"!=typeof e;class rj{constructor(){this.appSyncRealTime=new rS,this._api={post:n5,cancelREST:n6,isCancelErrorREST:nu,updateRequestToBeCancellable:n9}}getModuleName(){return"InternalGraphQLAPI"}async _headerBasedAuth(e,t,n={}){let{apiKey:r}=r_(e),i={};switch(t){case"apiKey":if(!r)throw new rO(rC);i={"X-Api-Key":r};break;case"iam":if(void 0===(await e.Auth.fetchAuthSession()).credentials)throw new rO(rD);break;case"oidc":case"userPool":{let t;try{t=(await e.Auth.fetchAuthSession()).tokens?.accessToken.toString()}catch(e){throw new rO({...rR,underlyingError:e})}if(!t)throw new rO(rx);i={Authorization:t};break}case"lambda":if("object"==typeof n&&!n.Authorization)throw new rO(rL);i={Authorization:n.Authorization}}return i}getGraphqlOperationType(e){let[{operation:t}]=tW(e).definitions;return t}graphql(e,{query:t,variables:n={},authMode:r,authToken:i},o,a){let s="string"==typeof t?tW(t):tW(t0(t)),[c={}]=s.definitions.filter(e=>"OperationDefinition"===e.kind),{operation:u}=c,l=o||{};switch(u){case"query":case"mutation":{let t;let o=new AbortController;return t=rF(e)?this._graphql(e,{query:s,variables:n,authMode:r},l,o,a,i):e(async e=>await this._graphql(e,{query:s,variables:n,authMode:r},l,o,a,i)),this._api.updateRequestToBeCancellable(t,o),t}case"subscription":return this._graphqlSubscribe(e,{query:s,variables:n,authMode:r},l,a,i);default:throw Error(`invalid operation type: ${u}`)}}async _graphql(e,{query:t,variables:n,authMode:r},i={},o,a,s){var c;let u,l,p;let{region:d,endpoint:f,customEndpoint:h,customEndpointRegion:m,defaultAuthMode:y}=r_(e),v=r||y||"iam",E="identityPool"===v?"iam":v,{headers:b,withCredentials:T}=rk(e);if("function"==typeof i){let e={method:"POST",url:new nn.a(h||f||"").toString(),queryString:t0(t)};u=await i(e)}else u=i;s&&(u={...u,Authorization:s});let g={...!h&&await this._headerBasedAuth(e,E,u),...h&&(m?await this._headerBasedAuth(e,E,u):{})||{},...b&&await b({query:t0(t),variables:n}),...u,...!h&&{"x-amz-user-agent":(0,nr.Zm)(a)}},N={query:t0(t),variables:n||null};l=h&&!m||"oidc"!==E&&"userPool"!==E&&"iam"!==E&&"lambda"!==E?void 0:{service:m?"execute-api":"appsync",region:m||d};let S=h||f;if(!S)throw rP(new rO(rM));try{let{body:t}=await this._api.post(e,{url:new nn.a(S),options:{headers:g,body:N,signingServiceInfo:l,withCredentials:T},abortController:o});p=await t.json()}catch(e){if(this.isCancelError(e))throw e;p=rP(e)}if((c=p)&&Array.isArray(c.errors)&&c.errors.length>0)throw rw(p);return p}isCancelError(e){return this._api.isCancelErrorREST(e)}cancel(e,t){return this._api.cancelREST(e,t)}_graphqlSubscribe(e,{query:t,variables:n,authMode:r},i={},o,a){let s=r_(e),c=r||s?.defaultAuthMode||"iam",{headers:u}=rk(e);return this.appSyncRealTime.subscribe({query:t0(t),variables:n,appSyncGraphqlEndpoint:s?.endpoint,region:s?.region,authenticationType:"identityPool"===c?"iam":c,apiKey:s?.apiKey,additionalHeaders:i,authToken:a,libraryConfigHeaders:u},o).pipe(function e(t){return _(function(n,r){var i,o,a=null,s=!1;a=n.subscribe(new H(r,void 0,void 0,function(i){o=ne(t(i,e(t)(n))),a?(a.unsubscribe(),a=null,o.subscribe(r)):s=!0},void 0)),s&&(a.unsubscribe(),a=null,o.subscribe(r))})}(e=>{if(e.errors)throw rw(e);throw e}))}}new rj;class rU extends rj{getModuleName(){return"GraphQLAPI"}graphql(e,t,n){let r={category:td.WD.API,action:td.gq.GraphQl};if(eg in t){let{[eg]:i,...o}=t;return super.graphql(e,o,n,{...r,...i})}return super.graphql(e,t,n,{...r})}isCancelError(e){return super.isCancelError(e)}cancel(e,t){return super.cancel(e,t)}}let r$=new rU;function rB(e,t){let n=tp(this);e.authMode=e.authMode||n.authMode,e.authToken=e.authToken||n.authToken;let r=t||n.headers;return r$.graphql(n.amplify,e,r)}function rG(e,t){return r$.cancel(e,t)}function rK(e){return r$.isCancelError(e)}let rV=e=>{A.Xb.listen("core",t=>{if("configure"!==t.payload.event)return;let n=t.payload.data.API?.GraphQL;void 0!==n&&ta(e,n,tp)})},rq=new Proxy({},{get(){throw Error("Client could not be generated. This is likely due to `Amplify.configure()` not being called prior to `generateClient()` or because the configuration passed to `Amplify.configure()` is missing GraphQL provider configuration.")}});var rQ=n(6898);function rz(e={}){return function(e){let t={[ts]:e.amplify,[tc]:e.authMode,[tu]:e.authToken,[tl]:e.headers,graphql:rB,cancel:rG,isCancelError:rK,models:rq,enums:rq,queries:rq,mutations:rq,subscriptions:rq},n=e.amplify.getConfig().API?.GraphQL;return void 0!==n?ta(t,n,tp):rV(t),t}({...e,amplify:rQ.d})}}}]);