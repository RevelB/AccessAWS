(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1798:function(e,r,t){Promise.resolve().then(t.bind(t,6117))},5863:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});let n=(0,t(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9376:function(e,r,t){"use strict";var n=t(5475);t.o(n,"useParams")&&t.d(r,{useParams:function(){return n.useParams}}),t.o(n,"usePathname")&&t.d(r,{usePathname:function(){return n.usePathname}}),t.o(n,"useRouter")&&t.d(r,{useRouter:function(){return n.useRouter}}),t.o(n,"useSearchParams")&&t.d(r,{useSearchParams:function(){return n.useSearchParams}})},6117:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return s}});var n=t(7437),a=t(2265),o=t(9376),u=t(1245),i=t(5863);function s(){let{user:e,loading:r}=(0,u.a)(),t=(0,o.useRouter)();return((0,a.useEffect)(()=>{r||(e?t.replace("/dashboard/open"):t.replace("/login"))},[e,r,t]),r)?(0,n.jsxs)("div",{className:"flex h-screen w-screen flex-col items-center justify-center bg-background p-4 gap-4",children:[(0,n.jsx)(i.Z,{className:"h-12 w-12 animate-spin text-primary"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]}):null}},1245:function(e,r,t){"use strict";t.d(r,{AuthProvider:function(){return h},a:function(){return m}});var n=t(7437),a=t(2265),o=t(389),u=t(3318),i=t(397),s=t(3918),c=t(5017),l=t(9138),f=t(8751);let d=(0,a.createContext)(void 0);function h(e){let{children:r}=e,[t,h]=(0,a.useState)(null),[m,w]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=async()=>{try{if((await (0,o.y)()).tokens){let e=await (0,u.t)();h(e)}else h(null)}catch(e){h(null)}finally{w(!1)}};e();let r=setInterval(e,3e4);return()=>clearInterval(r)},[]);let p=async(e,r)=>{w(!0);try{let{isSignedIn:t,nextStep:n}=await (0,i.z)({username:e,password:r});if(t){let e=await (0,u.t)();return h(e),e}if("CONFIRM_SIGN_UP"===n.signInStep){let e=Error("Email not verified");throw e.code="UserNotConfirmedException",e}throw Error("Sign in failed")}catch(e){throw e}finally{w(!1)}},y=async(e,r)=>{w(!0);try{let{isSignUpComplete:t,userId:n,nextStep:a}=await (0,s.y)({username:e,password:r,options:{userAttributes:{email:e}}});if(t)return await (0,u.t)();if("CONFIRM_SIGN_UP"===a.signUpStep)return null;throw Error("Sign up failed")}catch(e){throw console.error("Signup error:",e),e}finally{w(!1)}},v=async(e,r)=>{try{await (0,c.T)({username:e})}catch(e){if("NotAuthorizedException"===e.name)throw Error("Could not resend email. The password you entered is incorrect.");throw Error("An unexpected error occurred while trying to resend the verification email.")}},E=async()=>{w(!0);try{await (0,l.w)(),h(null)}catch(e){throw console.error("Logout error:",e),e}finally{w(!1)}},P=async(e,r)=>{try{await (0,f._)({username:e,confirmationCode:r})}catch(e){throw console.error("Email confirmation error:",e),e}};return(0,n.jsx)(d.Provider,{value:{user:t,loading:m,login:p,signup:y,logout:E,resendVerificationEmail:v,confirmEmail:P},children:r})}function m(){let e=(0,a.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},function(e){e.O(0,[868,748,971,117,744],function(){return e(e.s=1798)}),_N_E=e.O()}]);