(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[601],{4774:function(e,t,r){Promise.resolve().then(r.bind(r,7534)),Promise.resolve().then(r.bind(r,8271))},7534:function(e,t,r){"use strict";r.d(t,{FinishedJobsTable:function(){return C}});var a=r(7437),s=r(4267),n=r(3804),i=r(767),l=r(6153),o=r(1755),d=r(8082),c=r(6159),u=r(641),f=r(2265),m=r(4156),x=r(265),p=r(5051),h=r(5863),v=r(4064),b=r(8736),j=r(7648),g=r(3448),y=r(279),N=r(3675),w=r(3340),k=r(1488),D=r(2381);let Z=[{key:"deliveryDate",label:"Delivery Date",sortable:!0},{key:"clockNumberMediaName",label:"Clock No./Media Name",sortable:!0},{key:"services",label:"Services",sortable:!1},{key:"rate",label:"Rate (\xa3)",sortable:!1},{key:"adjusted",label:"Adjusted (\xa3)",sortable:!1},{key:"inputter",label:"Inputter",sortable:!1},{key:"verifier",label:"Verifier",sortable:!1},{key:"poReference",label:"PO#",sortable:!1},{key:"extcosts",label:"Ext. Costs (\xa3)",sortable:!1},{key:"billingnotes",label:"Billing Notes",sortable:!1}];function C(){let[e,t]=(0,f.useState)([]),[r,C]=(0,f.useState)(!0),[S,R]=(0,f.useState)("deliveryDate"),[T,A]=(0,f.useState)("desc"),[B,O]=(0,f.useState)({}),[E,M]=(0,f.useState)(null),[_,I]=(0,f.useState)(!1),[F,z]=(0,f.useState)(null),[L,P]=(0,f.useState)(!1),[U,J]=(0,f.useState)(null),{toast:V}=(0,w.pm)();(0,f.useEffect)(()=>{!async function(){C(!0);try{let{data:e}=await s.L.models.Job.list({filter:{status:{eq:l.B.Finished}}}),r=e.map(e=>({...e,services:e.services?JSON.parse(e.services):[]})),a={};r.forEach(e=>{a[e.id]={rate:void 0!==e.rate?String(e.rate):"",adjusted:void 0!==e.adjusted?String(e.adjusted):"",inputter:e.inputter||"",verifier:e.verifier||"",poReference:e.poReference||"",extcosts:void 0!==e.extcosts?String(e.extcosts):"",billingnotes:e.billingnotes||""}}),t(r),O(a)}catch(e){console.error("Error fetching finished jobs:",e)}finally{C(!1)}}()},[]);let H=(0,f.useMemo)(()=>[...e].sort((e,t)=>{let r=e[S],a=t[S];if(null==r)return 1;if(null==a)return -1;let s=0;if("deliveryDate"===S){let e=(0,o.Z)((0,d.Z)(r))?(0,d.Z)(r):new Date(0),t=(0,o.Z)((0,d.Z)(a))?(0,d.Z)(a):new Date(0);e<t&&(s=-1),e>t&&(s=1)}else s=r.localeCompare(a);return"asc"===T?s:-1*s}),[e,S,T]),Y=(0,f.useCallback)(e=>{S===e?A(e=>"asc"===e?"desc":"asc"):(R(e),A("asc"))},[S]),$=e=>S!==e?(0,a.jsx)(m.Z,{className:"ml-1 h-3 w-3 opacity-30"}):"asc"===T?(0,a.jsx)(x.Z,{className:"ml-1 h-3 w-3"}):(0,a.jsx)(p.Z,{className:"ml-1 h-3 w-3"}),W=e=>{if(!e)return"N/A";try{let t=(0,d.Z)(e);return(0,o.Z)(t)?(0,c.Z)(t,"dd/MM/yy"):"Invalid Date"}catch(e){return"Invalid Date"}},q=e=>e&&0!==e.length?e.map(e=>e.customName||e.name).join(", "):"N/A",X=(e,t,r)=>{O(a=>({...a,[e]:{...a[e],[t]:r}}))},K=async(r,a)=>{var n,i,l;let o=e.find(e=>e.id===r);if(!o)return;let d=null!==(i=null===(n=B[r])||void 0===n?void 0:n[a])&&void 0!==i?i:"",c=null!==(l=o[a])&&void 0!==l?l:"";if(("inputter"===a||"verifier"===a)&&(X(r,a,d=d.toUpperCase()),d&&!/^[A-Z]{2,3}$/.test(d))){V({title:"Invalid Input",description:"".concat(a.charAt(0).toUpperCase()+a.slice(1)," must be 2 or 3 uppercase letters."),variant:"destructive"}),X(r,a,c);return}if(String(c)!==d){M("".concat(r,"-").concat(a));try{await s.L.models.Job.update({id:r,[a]:d}),t(e=>e.map(e=>e.id===r?{...e,[a]:d}:e)),V({title:"Field Updated",description:"".concat(a.charAt(0).toUpperCase()+a.slice(1)," for job has been saved.")})}catch(e){console.error("Failed to update ".concat(a,":"),e),X(r,a,c),V({title:"Update Failed",description:"Could not save ".concat(a,". Please try again."),variant:"destructive"})}finally{M(null)}}},G=(t,r)=>{var a,s,n;let i=e.find(e=>e.id===t);if(!i)return;let l=null!==(s=null===(a=B[t])||void 0===a?void 0:a[r])&&void 0!==s?s:"",o=null!==(n=i[r])&&void 0!==n?n:0;if(""!==l.trim()&&!/^\d+(\.\d{1,2})?$/.test(l.trim())){V({title:"Invalid Input",description:"".concat(r," must be a valid number with up to two decimal places."),variant:"destructive"}),X(t,r,String(o));return}let d=""===l.trim()?0:parseFloat(l);o!==d&&(z({jobId:t,field:r,newValue:d,displayValue:d.toFixed(2)}),I(!0))},Q=async()=>{if(!F)return;let{jobId:r,field:a,newValue:n}=F;M("".concat(r,"-").concat(a));try{await s.L.models.Job.update({id:r,[a]:n}),t(e=>e.map(e=>e.id===r?{...e,[a]:n}:e)),V({title:"".concat(a.charAt(0).toUpperCase()+a.slice(1)," Updated"),description:"".concat(a.charAt(0).toUpperCase()+a.slice(1)," for job has been saved.")})}catch(s){console.error("Failed to update ".concat(a,":"),s);let t=e.find(e=>e.id===r);if(V({title:"Update Failed",description:"Could not save the ".concat(a,". Please try again."),variant:"destructive"}),t){var i;X(r,a,String(null!==(i=t[a])&&void 0!==i?i:""))}}finally{M(null),z(null),I(!1)}},ee=e=>{J({jobId:e.id,clockNumberMediaName:e.clockNumberMediaName}),P(!0)},et=async()=>{if(!U)return;let{jobId:e}=U;M("".concat(e,"-status"));try{await s.L.models.Job.update({id:e,status:l.B.Delivered}),t(t=>t.filter(t=>t.id!==e)),V({title:"Job Status Reverted",description:'Job "'.concat(U.clockNumberMediaName,'" has been moved back to Delivered.')})}catch(e){console.error("Failed to revert status:",e),V({title:"Update Failed",description:"Could not revert the job status. Please try again.",variant:"destructive"})}finally{M(null),J(null),P(!1)}};if(r)return(0,a.jsxs)("div",{className:"flex h-64 w-full items-center justify-center",children:[(0,a.jsx)(h.Z,{className:"h-8 w-8 animate-spin text-primary"}),(0,a.jsx)("span",{className:"ml-2",children:"Loading finished jobs..."})]});if(0===e.length)return(0,a.jsx)("div",{className:"flex items-center justify-center py-10",children:(0,a.jsx)("p",{className:"text-xl text-muted-foreground",children:"No finished jobs found."})});let er=F?e.find(e=>e.id===F.jobId):null;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.pn,{children:(0,a.jsx)(u.x,{className:"w-full rounded-md border bg-card shadow",style:{maxHeight:"calc(100vh - 12rem)"},children:(0,a.jsxs)(n.iA,{children:[(0,a.jsx)(n.xD,{children:(0,a.jsxs)(n.SC,{children:[Z.map(e=>(0,a.jsx)(n.ss,{className:(0,g.cn)("h-auto px-1 py-1 text-xs",e.sortable&&"cursor-pointer hover:bg-muted/50"),onClick:()=>e.sortable&&Y(e.key),children:(0,a.jsxs)("div",{className:"flex items-center",children:[e.label,e.sortable&&$(e.key)]})},e.key)),(0,a.jsx)(n.ss,{className:"text-right h-auto px-1 py-1 text-xs",children:(0,a.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,a.jsx)(n.RM,{children:H.map(e=>(0,a.jsxs)(n.SC,{children:[Z.map(t=>(0,a.jsx)(n.pj,{className:"px-1 py-1 text-s align-top",children:(()=>{var r,s,n,i,l,o,d,c;let u=t.key,f=E==="".concat(e.id,"-").concat(u);switch(u){case"deliveryDate":return W(e.deliveryDate);case"clockNumberMediaName":return e.clockNumberMediaName;case"services":return q(e.services);case"rate":case"adjusted":case"extcosts":let m=null!==(s=null===(r=B[e.id])||void 0===r?void 0:r[u])&&void 0!==s?s:"";return(0,a.jsxs)("div",{className:"relative w-24",children:[(0,a.jsx)(y.I,{id:"".concat(u,"-").concat(e.id),type:"number",step:"0.01",placeholder:"0.00",value:m,onChange:t=>X(e.id,u,t.target.value),onBlur:()=>G(e.id,u),disabled:f,className:"h-6 pr-4 text-xs number-input-no-spinner"}),f&&(0,a.jsx)(h.Z,{className:"absolute right-1 top-1/2 -translate-y-1/2 h-2 w-2 animate-spin"})]});case"inputter":case"verifier":let x=null!==(i=null===(n=B[e.id])||void 0===n?void 0:n[u])&&void 0!==i?i:"";return(0,a.jsxs)("div",{className:"relative w-20",children:[(0,a.jsx)(y.I,{id:"".concat(u,"-").concat(e.id),type:"text",placeholder:"___",value:x,onChange:t=>X(e.id,u,t.target.value),onBlur:()=>K(e.id,u),disabled:f,maxLength:3,className:"h-6 text-xs pr-4 uppercase placeholder:text-xs leading-none"}),f&&(0,a.jsx)(h.Z,{className:"absolute right-1 top-1/2 -translate-y-1/2 h-4 w-4 animate-spin"})]});case"poReference":let p=null!==(o=null===(l=B[e.id])||void 0===l?void 0:l[u])&&void 0!==o?o:"";return(0,a.jsxs)("div",{className:"relative w-28",children:[(0,a.jsx)(y.I,{id:"".concat(u,"-").concat(e.id),type:"text",placeholder:"PO Number",value:p,onChange:t=>X(e.id,u,t.target.value),onBlur:()=>K(e.id,"poReference"),disabled:f,className:"h-6 text-xs pr-4 placeholder:text-xs leading-none"}),f&&(0,a.jsx)(h.Z,{className:"absolute right-1 top-1/2 -translate-y-1/2 h-4 w-4 animate-spin"})]});case"billingnotes":let v=null!==(c=null===(d=B[e.id])||void 0===d?void 0:d[u])&&void 0!==c?c:"";return(0,a.jsxs)("div",{className:"relative w-48",children:[(0,a.jsx)(N.g,{id:"".concat(u,"-").concat(e.id),placeholder:"Notes...",value:v,onChange:t=>X(e.id,u,t.target.value),onBlur:()=>K(e.id,u),disabled:f,className:"text-[10px] leading-tight min-h-0 h-6 p-0.5 resize-y",rows:1}),f&&(0,a.jsx)(h.Z,{className:"absolute right-1 top-1.5 h-4 w-4 animate-spin"})]});default:let b=e[t.key];return String(null==b?"N/A":b)}})()},"".concat(e.id,"-").concat(t.key))),(0,a.jsx)(n.pj,{className:"text-right px-1 py-1 align-top",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,a.jsxs)(k.u,{children:[(0,a.jsx)(k.aJ,{asChild:!0,children:(0,a.jsxs)(D.z,{variant:"ghost",size:"icon",className:"h-5 w-5 text-destructive hover:text-destructive/80",onClick:()=>ee(e),disabled:null!==E,children:[(0,a.jsx)(v.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{className:"sr-only",children:["Revert status for ",e.clockNumberMediaName]})]})}),(0,a.jsx)(k._v,{children:(0,a.jsx)("p",{children:"Revert to Delivered"})})]}),(0,a.jsxs)(k.u,{children:[(0,a.jsx)(k.aJ,{asChild:!0,children:(0,a.jsx)(D.z,{asChild:!0,variant:"ghost",size:"icon",className:"h-5 w-5 text-primary hover:text-primary/80",disabled:null!==E,children:(0,a.jsxs)(j.default,{href:"/jobs/".concat(e.id,"?view=true"),children:[(0,a.jsx)(b.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{className:"sr-only",children:["View Details for ",e.clockNumberMediaName]})]})})}),(0,a.jsx)(k._v,{children:(0,a.jsx)("p",{children:"View Details"})})]})]})})]},e.id))})]})})}),(0,a.jsx)(i.aR,{open:_,onOpenChange:I,children:(0,a.jsxs)(i._T,{children:[(0,a.jsxs)(i.fY,{children:[(0,a.jsx)(i.f$,{children:"Confirm Change"}),(0,a.jsxs)(i.yT,{children:["Are you sure you want to change the ",null==F?void 0:F.field," for job",(0,a.jsxs)("span",{className:"font-semibold",children:[" ",null==er?void 0:er.clockNumberMediaName," "]}),"to ",(0,a.jsxs)("span",{className:"font-semibold",children:["\xa3",null==F?void 0:F.displayValue]}),"?"]})]}),(0,a.jsxs)(i.xo,{children:[(0,a.jsx)(i.le,{onClick:()=>{if(F){var t;let r=e.find(e=>e.id===F.jobId),a=r?String(null!==(t=r[F.field])&&void 0!==t?t:""):"";X(F.jobId,F.field,a)}z(null)},children:"No"}),(0,a.jsx)(i.OL,{onClick:Q,children:"Yes"})]})]})}),(0,a.jsx)(i.aR,{open:L,onOpenChange:P,children:(0,a.jsxs)(i._T,{children:[(0,a.jsxs)(i.fY,{children:[(0,a.jsx)(i.f$,{children:"Revert Job Status?"}),(0,a.jsxs)(i.yT,{children:["Are you sure you want to revert the status of job ",(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"font-semibold",children:null==U?void 0:U.clockNumberMediaName}),(0,a.jsx)("br",{}),'back to "Delivered"? This will remove it from the finished jobs list.']})]}),(0,a.jsxs)(i.xo,{children:[(0,a.jsx)(i.le,{onClick:()=>J(null),children:"Cancel"}),(0,a.jsx)(i.OL,{onClick:et,className:"bg-destructive hover:bg-destructive/90",disabled:null!==E,children:"Revert Status"})]})]})})]})}},8271:function(e,t,r){"use strict";r.d(t,{KanbanBoard:function(){return R}});var a=r(7437),s=r(2265),n=r(6153),i=r(7648),l=r(9820),o=r(8705),d=r(8082),c=r(6639),u=r(1878),f=r(1596),m=r(6159),x=r(5721),p=r(9847),h=r(759),v=r(9575),b=r(3448),j=r(2451),g=r(5698),y=r(5863),N=r(407),w=r(3340),k=r(4267);function D(e){let{job:t}=e,{toast:r}=(0,w.pm)(),[D,Z]=(0,s.useState)(!1),[C,S]=(0,s.useState)(!1),[R,T]=(0,s.useState)(null),[A,B]=(0,s.useState)(null),[O,E]=(0,s.useState)(null);(0,s.useEffect)(()=>{if(t.deliveryDate)try{let e=(0,d.Z)(t.deliveryDate),r=(0,c.Z)(new Date),a=(0,c.Z)(e),s=(0,u.Z)(a,r)&&t.status!==n.B.Finished;T(s),(0,f.Z)(a,r)?E("today"):(0,u.Z)(a,r)?E("past"):E("future"),B((0,m.Z)(e,"dd/MM/yy"))}catch(e){console.error("Error parsing or formatting delivery date:",t.deliveryDate,e),B("Invalid Date"),E("invalid"),T(!1)}else B("No Date"),E("invalid"),T(!1)},[t.deliveryDate,t.status]);let M=o.HZ.indexOf(t.status),_=M<=0,I=M>=o.HZ.length-1,F=async(e,a)=>{if(a.stopPropagation(),a.preventDefault(),!C&&t.deliveryDate){S(!0);try{let r,a=(0,d.Z)(t.deliveryDate);if("increment"===e)for(r=(0,x.Z)(a,1);(0,p.Z)(r)||(0,h.Z)(r);)r=(0,x.Z)(r,1);else for(r=(0,v.Z)(a,1);(0,p.Z)(r)||(0,h.Z)(r);)r=(0,v.Z)(r,1);await k.L.models.Job.update({id:t.id,deliveryDate:r.toISOString()})}catch(e){console.error("Failed to update delivery date:",e),r({title:"Error",description:"Could not update the delivery date.",variant:"destructive"})}finally{S(!1)}}},z=async(e,a)=>{if(a.stopPropagation(),a.preventDefault(),D)return;let s=M;if("prev"!==e||_){if("next"!==e||I){Z(!1);return}s=M+1}else s=M-1;let i=o.HZ[s];if(t.status===n.B.Delivered&&i===n.B.Finished&&(!t.inSAP||!t.commercialDescription||""===t.commercialDescription.trim())){r({title:"Action Required",description:"Please Ensure Commercial Description field has been filled out and In SAP has been clicked.",variant:"destructive"}),Z(!1);return}Z(!0);try{await k.L.models.Job.update({id:t.id,status:i})}catch(e){console.error("Failed to move job status:",e),r({title:"Error",description:"An unexpected error occurred while updating status.",variant:"destructive"})}finally{Z(!1)}},L=t.productionNotes&&""!==t.productionNotes.trim(),P=t.creator||t.checker,U="invalid"===O;return(0,a.jsx)(i.default,{href:"/jobs/".concat(t.id),className:"block group",children:(0,a.jsx)(l.Zb,{className:(0,b.cn)("hover:shadow-lg transition-shadow duration-200 ease-in-out",t.onHold&&"opacity-70 border-dashed border-orange-400",!0===R&&"past"===O&&"border-destructive bg-destructive/5","future"===O&&"bg-muted",(D||C)&&"opacity-60 animate-pulse"),children:(0,a.jsx)(l.Ol,{className:"py-1 px-1",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center relative z-5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[_?(0,a.jsx)("div",{}):(0,a.jsx)("button",{onClick:e=>z("prev",e),disabled:D||C,className:"p-0 rounded-md hover:bg-muted/50 disabled:opacity-30 disabled:cursor-not-allowed w-4 h-4 flex items-center justify-center","aria-label":"Move to previous status",children:(0,a.jsx)(j.Z,{className:"h-4 w-4 text-muted-foreground"})}),(0,a.jsxs)("div",{className:"flex items-left gap-1.5",children:[L&&(0,a.jsx)(g.Z,{className:"h-3 w-3 flex-shrink-0 text-blue-500"}),t.priority&&(0,a.jsx)(o.fn,{className:"h-4 w-4 flex-shrink-0 text-orange-500"}),t.onHold&&(0,a.jsx)(o.VC,{className:"h-4 w-4 flex-shrink-0 text-orange-600"}),t.stellarTask&&(0,a.jsx)(o.Uv,{className:"h-4 w-4 flex-shrink-0 text-yellow-500"})]})]}),(0,a.jsx)("div",{className:"absolute left-1/2 transform -translate-x-1/2 flex items-center gap-1.5",children:C?(0,a.jsx)(y.Z,{className:"h-4 w-4 animate-spin text-primary"}):null===A?(0,a.jsx)("span",{className:"font-medium text-xs text-muted-foreground",children:"Loading..."}):(0,a.jsx)("span",{className:(0,b.cn)("font-medium text-xs",("today"===O||"future"===O)&&"px-1 rounded-sm",null===O&&"text-muted-foreground","invalid"===O&&"text-muted-foreground","past"===O&&"text-foreground","today"===O&&"text-foreground bg-card","future"===O&&"text-foreground bg-muted"),children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("button",{onClick:e=>F("decrement",e),disabled:C||U,className:(0,b.cn)("p-0.5 rounded-md hover:bg-muted/50 disabled:opacity-30 disabled:cursor-not-allowed flex items-center justify-center w-0 h-5 text-xs",U&&"invisible"),"aria-label":"Decrement delivery date",children:"-"}),(0,a.jsx)("span",{children:A}),(0,a.jsx)("button",{onClick:e=>F("increment",e),disabled:C||U,className:(0,b.cn)("p-0.5 rounded-md hover:bg-muted/50 disabled:opacity-30 disabled:cursor-not-allowed flex items-center justify-center w-0 h-5 text-xs",U&&"invisible"),"aria-label":"Increment delivery date",children:"+"})]})})}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"flex items-center gap-1.5 font-small text-xs",children:P&&!U&&(0,a.jsxs)("span",{className:"text-muted-foreground ml-1",children:["(",t.creator||"","/",t.checker||"",")"]})}),(0,a.jsx)("button",{onClick:e=>z("next",e),disabled:I||D||C,className:(0,b.cn)("p-0 rounded-md hover:bg-muted/50","disabled:opacity-30 disabled:cursor-not-allowed",I&&"invisible"),"aria-label":"Move to next status",children:(0,a.jsx)(N.Z,{className:"h-4 w-4 text-muted-foreground"})})]})]}),(0,a.jsx)("div",{className:"flex items-center justify-between text-left",children:(0,a.jsx)(l.ll,{className:"pl-1 text-xs font-semibold group-hover:text-primary transition-colors",children:t.clockNumberMediaName})})]})})})})}var Z=r(3153);function C(e){let{status:t,jobs:r,title:s}=e,n=o.bL[t],i=r.filter(e=>{if(!e.deliveryDate)return!1;try{let t=(0,d.Z)(e.deliveryDate);return(0,Z.Z)(t)}catch(t){return console.error("Error parsing deliveryDate:",t,e.deliveryDate),!1}}).length,l=r.length;return(0,a.jsxs)("div",{className:"flex flex-col bg-muted/50 rounded-lg shadow flex-1 basis-0 min-w-36",children:[(0,a.jsxs)("div",{className:"py-1 px-3 border-b sticky top-0 bg-muted/80 backdrop-blur-sm z-10 rounded-t-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h3",{className:"text-base font-semibold flex items-center font-headline",children:[n&&(0,a.jsx)(n,{className:"mr-2 h-4 w-4 text-primary"}),s]}),(0,a.jsx)("span",{className:"text-xs font-normal text-foreground bg-background px-2 py-0.5 rounded-full",children:l})]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:(0,a.jsxs)("p",{children:["Today's Total: ",i]})})]}),(0,a.jsx)("div",{className:"flex-1 p-1 min-h-0",children:0===r.length?(0,a.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No jobs in this status."}):(0,a.jsx)("div",{className:"space-y-1",children:r.map(e=>(0,a.jsx)(D,{job:e},e.id))})})]})}var S=r(1755);function R(e){let{statusFilter:t}=e,[r,i]=(0,s.useState)([]),[l,m]=(0,s.useState)(!0);(0,s.useEffect)(()=>{(async()=>{m(!0);try{let e="open"===t?o.vj:o.LD,{data:r}=await k.L.models.Job.list(),a=r.filter(t=>e.includes(t.status)).map(e=>({...e,services:e.services?JSON.parse(e.services):[]}));i(a)}catch(e){console.error("Error fetching ".concat(t," jobs: "),e)}finally{m(!1)}})()},[t]);let x=(0,s.useMemo)(()=>o.HZ.filter(e=>"open"===t?e!==n.B.Finished:e===n.B.Finished),[t]),p=(0,s.useMemo)(()=>x.reduce((e,t)=>{let a=r.filter(e=>e.status===t).sort((e,t)=>{let r=(0,c.Z)(new Date),a=e=>{if(!e.deliveryDate)return 3;try{let t=(0,d.Z)(e.deliveryDate);if(!(0,S.Z)(t))return 3;let a=(0,c.Z)(t);if((0,u.Z)(a,r))return 0;if((0,f.Z)(a,r))return 1;return 2}catch(e){return console.error("Error parsing date for sorting:",e),3}},s=a(e),n=a(t);return s!==n?s-n:e.clockNumberMediaName.localeCompare(t.clockNumberMediaName)});return e[t]=a,e},{}),[r,x]);return l?(0,a.jsxs)("div",{className:"flex items-center justify-center h-full",children:[(0,a.jsx)(y.Z,{className:"h-8 w-8 animate-spin text-primary"}),(0,a.jsx)("p",{className:"ml-2 text-muted-foreground",children:"Loading jobs..."})]}):0!==r.length||l?(0,a.jsx)("div",{className:"flex gap-3.5 overflow-x-auto pb-0",children:x.map(e=>(0,a.jsx)(C,{status:e,title:e.toString(),jobs:p[e]||[]},e))}):(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsxs)("p",{className:"text-xl text-muted-foreground",children:["No ",t," jobs found."]})})}},767:function(e,t,r){"use strict";r.d(t,{OL:function(){return v},_T:function(){return f},aR:function(){return o},f$:function(){return p},fY:function(){return m},le:function(){return b},vW:function(){return d},xo:function(){return x},yT:function(){return h}});var a=r(7437),s=r(2265),n=r(9685),i=r(3448),l=r(2381);let o=n.fC,d=n.xz,c=n.h_,u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.aV,{className:(0,i.cn)("fixed inset-0 z-50 bg-background/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s,ref:t})});u.displayName=n.aV.displayName;let f=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(u,{}),(0,a.jsx)(n.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...s})]})});f.displayName=n.VY.displayName;let m=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...r})};m.displayName="AlertDialogHeader";let x=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};x.displayName="AlertDialogFooter";let p=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold",r),...s})});p.displayName=n.Dx.displayName;let h=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...s})});h.displayName=n.dk.displayName;let v=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.aU,{ref:t,className:(0,i.cn)((0,l.d)(),r),...s})});v.displayName=n.aU.displayName;let b=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.$j,{ref:t,className:(0,i.cn)((0,l.d)({variant:"outline"}),"mt-2 sm:mt-0",r),...s})});b.displayName=n.$j.displayName},2381:function(e,t,r){"use strict";r.d(t,{d:function(){return o},z:function(){return d}});var a=r(7437),s=r(2265),n=r(8482),i=r(535),l=r(3448);let o=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,a.jsx)(u,{className:(0,l.cn)(o({variant:s,size:i,className:r})),ref:t,...c})});d.displayName="Button"},9820:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return i},aY:function(){return c},eW:function(){return u},ll:function(){return o}});var a=r(7437),s=r(2265),n=r(3448);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});l.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},279:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var a=r(7437),s=r(2265),n=r(3448);let i=s.forwardRef((e,t)=>{let{className:r,type:s,...i}=e;return(0,a.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...i})});i.displayName="Input"},641:function(e,t,r){"use strict";r.d(t,{B:function(){return o},x:function(){return l}});var a=r(7437),s=r(2265),n=r(5054),i=r(3448);let l=s.forwardRef((e,t)=>{let{className:r,children:s,...l}=e;return(0,a.jsxs)(n.fC,{ref:t,className:(0,i.cn)("relative overflow-hidden",r),...l,children:[(0,a.jsx)(n.l_,{className:"h-full w-full rounded-[inherit]",children:s}),(0,a.jsx)(o,{}),(0,a.jsx)(n.Ns,{})]})});l.displayName=n.fC.displayName;let o=s.forwardRef((e,t)=>{let{className:r,orientation:s="vertical",...l}=e;return(0,a.jsx)(n.gb,{ref:t,orientation:s,className:(0,i.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...l,children:(0,a.jsx)(n.q4,{className:"relative flex-1 rounded-full bg-border"})})});o.displayName=n.gb.displayName},3804:function(e,t,r){"use strict";r.d(t,{RM:function(){return o},SC:function(){return d},iA:function(){return i},pj:function(){return u},ss:function(){return c},xD:function(){return l}});var a=r(7437),s=r(2265),n=r(3448);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",r),...s})})});i.displayName="Table";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",r),...s})});l.displayName="TableHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",r),...s})});o.displayName="TableBody",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s})}).displayName="TableFooter";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s})});d.displayName="TableRow";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...s})});c.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",r),...s})}).displayName="TableCaption"},3675:function(e,t,r){"use strict";r.d(t,{g:function(){return i}});var a=r(7437),s=r(2265),n=r(3448);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...s})});i.displayName="Textarea"},1488:function(e,t,r){"use strict";r.d(t,{_v:function(){return c},aJ:function(){return d},pn:function(){return l},u:function(){return o}});var a=r(7437),s=r(2265),n=r(5046),i=r(3448);let l=n.zt,o=n.fC,d=n.xz,c=s.forwardRef((e,t)=>{let{className:r,sideOffset:s=4,...l}=e;return(0,a.jsx)(n.h_,{children:(0,a.jsx)(n.VY,{ref:t,sideOffset:s,className:(0,i.cn)("z-[51] overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...l})})});c.displayName=n.VY.displayName},3340:function(e,t,r){"use strict";r.d(t,{pm:function(){return f}});var a=r(2265);let s=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=l(d,e),o.forEach(e=>{e(d)})}function u(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=a.useState(d);return a.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},4267:function(e,t,r){"use strict";r.d(t,{L:function(){return a}});let a=(0,r(3990).d)()},8705:function(e,t,r){"use strict";r.d(t,{HZ:function(){return N},LD:function(){return y},Mk:function(){return f},Uv:function(){return j},VC:function(){return b},bL:function(){return h},eW:function(){return x},fn:function(){return v},su:function(){return p},vj:function(){return g},zj:function(){return m}});var a=r(6153),s=r(4789),n=r(9345),i=r(2160),l=r(4743),o=r(6901),d=r(6399),c=r(512),u=r(6595);let f=["Closed Captions","Audio Description","Open Captions","Translation","Transcription","Transcreation","BSL","Proofreading","Other"],m=["Original","Re-Edit","Cutdown","Re-encode","DTT","Premix","Mono AD","Other"],x=["XR Delivery","XR UK Delivery","Access","Peach"],p=[...x,"Other..."],h={[a.B.Booked]:s.Z,[a.B.Received]:n.Z,[a.B.Encoded]:i.Z,[a.B.Delivered]:l.Z,[a.B.Finished]:o.Z},v=d.Z,b=c.Z,j=u.Z,g=[a.B.Booked,a.B.Received,a.B.Encoded,a.B.Delivered],y=[a.B.Finished],N=[a.B.Booked,a.B.Received,a.B.Encoded,a.B.Delivered,a.B.Finished]},6153:function(e,t,r){"use strict";var a,s;r.d(t,{B:function(){return a}}),(s=a||(a={})).Booked="Booked",s.Received="Received",s.Encoded="Encoded",s.Delivered="Delivered",s.Finished="Finished",Object.values(a)},3448:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var a=r(1994),s=r(3335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}}},function(e){e.O(0,[868,969,449,105,233,648,847,46,338,971,117,744],function(){return e(e.s=4774)}),_N_E=e.O()}]);